/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_game_scenes_GameScene_ts";
exports.ids = ["_ssr_game_scenes_GameScene_ts"];
exports.modules = {

/***/ "(ssr)/./game/entities/Player.ts":
/*!*********************************!*\
  !*** ./game/entities/Player.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Player)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"(ssr)/./node_modules/.pnpm/phaser@3.90.0/node_modules/phaser/dist/phaser.esm.js\");\n\nclass Player {\n    constructor(scene, x, y){\n        this.scene = scene;\n        // Create sprite with the first frame\n        this.sprite = scene.physics.add.sprite(x, y, 'player', 0);\n        this.sprite.setOrigin(0.5, 1);\n        this.sprite.setCollideWorldBounds(true);\n        this.sprite.setSize(20, 12);\n        this.sprite.setOffset(6, 20);\n        // Movement speed\n        this.speed = 150;\n        // Create animations\n        this.createAnimations();\n        // Setup keyboard controls\n        this.cursors = scene.input.keyboard.createCursorKeys();\n        this.wasd = scene.input.keyboard.addKeys({\n            up: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.W,\n            down: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.S,\n            left: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.A,\n            right: phaser__WEBPACK_IMPORTED_MODULE_0__.Input.Keyboard.KeyCodes.D\n        });\n        // Touch/mobile joystick input\n        this.touchInput = {\n            x: 0,\n            y: 0,\n            active: false\n        };\n        // Create virtual joystick for mobile\n        if (this.isMobile()) {\n            this.createVirtualJoystick();\n        }\n        // Current direction\n        this.direction = 'down';\n        this.isMoving = false;\n    }\n    isMobile() {\n        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;\n    }\n    createVirtualJoystick() {\n        // Create joystick container\n        const joystickContainer = document.createElement('div');\n        joystickContainer.id = 'virtual-joystick';\n        joystickContainer.style.cssText = `\n      position: fixed;\n      bottom: 30px;\n      left: 30px;\n      width: 120px;\n      height: 120px;\n      border-radius: 60px;\n      background: rgba(255, 255, 255, 0.5);\n      border: 3px solid rgba(44, 90, 160, 0.7);\n      z-index: 10000;\n      touch-action: none;\n      user-select: none;\n      -webkit-user-select: none;\n    `;\n        // Create joystick knob\n        const knob = document.createElement('div');\n        knob.id = 'joystick-knob';\n        knob.style.cssText = `\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 50px;\n      height: 50px;\n      border-radius: 25px;\n      background: rgba(44, 90, 160, 0.8);\n      border: 2px solid #fff;\n      pointer-events: none;\n    `;\n        joystickContainer.appendChild(knob);\n        // Append to body for fixed positioning\n        document.body.appendChild(joystickContainer);\n        // Track joystick state\n        const joystickRect = {\n            centerX: 0,\n            centerY: 0\n        };\n        const maxDistance = 35;\n        const updateJoystickPosition = ()=>{\n            const rect = joystickContainer.getBoundingClientRect();\n            joystickRect.centerX = rect.left + rect.width / 2;\n            joystickRect.centerY = rect.top + rect.height / 2;\n        };\n        const handleTouch = (e)=>{\n            e.preventDefault();\n            const touch = e.touches[0] || e.changedTouches[0];\n            updateJoystickPosition();\n            let dx = touch.clientX - joystickRect.centerX;\n            let dy = touch.clientY - joystickRect.centerY;\n            // Limit distance\n            const distance = Math.sqrt(dx * dx + dy * dy);\n            if (distance > maxDistance) {\n                dx = dx / distance * maxDistance;\n                dy = dy / distance * maxDistance;\n            }\n            // Update knob position\n            knob.style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px))`;\n            // Normalize to -1 to 1 range\n            this.touchInput.x = dx / maxDistance;\n            this.touchInput.y = dy / maxDistance;\n            this.touchInput.active = true;\n        };\n        const handleTouchEnd = ()=>{\n            knob.style.transform = 'translate(-50%, -50%)';\n            this.touchInput.x = 0;\n            this.touchInput.y = 0;\n            this.touchInput.active = false;\n        };\n        // Mouse handlers (for desktop testing and click support)\n        let isMouseDown = false;\n        const handleMouse = (e)=>{\n            if (!isMouseDown) return;\n            e.preventDefault();\n            updateJoystickPosition();\n            let dx = e.clientX - joystickRect.centerX;\n            let dy = e.clientY - joystickRect.centerY;\n            // Limit distance\n            const distance = Math.sqrt(dx * dx + dy * dy);\n            if (distance > maxDistance) {\n                dx = dx / distance * maxDistance;\n                dy = dy / distance * maxDistance;\n            }\n            // Update knob position\n            knob.style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px))`;\n            // Normalize to -1 to 1 range\n            this.touchInput.x = dx / maxDistance;\n            this.touchInput.y = dy / maxDistance;\n            this.touchInput.active = true;\n        };\n        const handleMouseDown = (e)=>{\n            isMouseDown = true;\n            handleMouse(e);\n        };\n        const handleMouseUp = ()=>{\n            isMouseDown = false;\n            knob.style.transform = 'translate(-50%, -50%)';\n            this.touchInput.x = 0;\n            this.touchInput.y = 0;\n            this.touchInput.active = false;\n        };\n        // Touch events with passive: false to allow preventDefault\n        joystickContainer.addEventListener('touchstart', handleTouch, {\n            passive: false\n        });\n        joystickContainer.addEventListener('touchmove', handleTouch, {\n            passive: false\n        });\n        joystickContainer.addEventListener('touchend', handleTouchEnd, {\n            passive: false\n        });\n        joystickContainer.addEventListener('touchcancel', handleTouchEnd, {\n            passive: false\n        });\n        // Mouse events\n        joystickContainer.addEventListener('mousedown', handleMouseDown);\n        document.addEventListener('mousemove', handleMouse);\n        document.addEventListener('mouseup', handleMouseUp);\n    }\n    createAnimations() {\n        const scene = this.scene;\n        // Frame layout: 4x4 grid (4 columns, 4 rows)\n        // Row 0 (frames 0-3): Down\n        // Row 1 (frames 4-7): Left\n        // Row 2 (frames 8-11): Right\n        // Row 3 (frames 12-15): Up\n        // Down animation\n        if (!scene.anims.exists('walk-down')) {\n            scene.anims.create({\n                key: 'walk-down',\n                frames: scene.anims.generateFrameNumbers('player', {\n                    start: 0,\n                    end: 3\n                }),\n                frameRate: 8,\n                repeat: -1\n            });\n        }\n        // Left animation\n        if (!scene.anims.exists('walk-left')) {\n            scene.anims.create({\n                key: 'walk-left',\n                frames: scene.anims.generateFrameNumbers('player', {\n                    start: 4,\n                    end: 7\n                }),\n                frameRate: 8,\n                repeat: -1\n            });\n        }\n        // Right animation\n        if (!scene.anims.exists('walk-right')) {\n            scene.anims.create({\n                key: 'walk-right',\n                frames: scene.anims.generateFrameNumbers('player', {\n                    start: 8,\n                    end: 11\n                }),\n                frameRate: 8,\n                repeat: -1\n            });\n        }\n        // Up animation\n        if (!scene.anims.exists('walk-up')) {\n            scene.anims.create({\n                key: 'walk-up',\n                frames: scene.anims.generateFrameNumbers('player', {\n                    start: 12,\n                    end: 15\n                }),\n                frameRate: 8,\n                repeat: -1\n            });\n        }\n        // Idle animations (first frame of each direction)\n        const idleFrames = {\n            down: 0,\n            left: 4,\n            right: 8,\n            up: 12\n        };\n        Object.entries(idleFrames).forEach(([dir, frame])=>{\n            if (!scene.anims.exists(`idle-${dir}`)) {\n                scene.anims.create({\n                    key: `idle-${dir}`,\n                    frames: [\n                        {\n                            key: 'player',\n                            frame: frame\n                        }\n                    ],\n                    frameRate: 1\n                });\n            }\n        });\n    }\n    update() {\n        // Check if user is typing in an HTML input\n        const activeElement = document.activeElement;\n        const isTyping = activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA' || activeElement.getAttribute('contenteditable') === 'true');\n        if (isTyping) {\n            this.sprite.setVelocity(0, 0);\n            this.isMoving = false;\n            this.sprite.anims.play(`idle-${this.direction}`, true);\n            return {\n                x: this.sprite.x,\n                y: this.sprite.y,\n                direction: this.direction,\n                isMoving: false\n            };\n        }\n        // Get keyboard input\n        const leftDown = this.cursors.left.isDown || this.wasd.left.isDown;\n        const rightDown = this.cursors.right.isDown || this.wasd.right.isDown;\n        const upDown = this.cursors.up.isDown || this.wasd.up.isDown;\n        const downDown = this.cursors.down.isDown || this.wasd.down.isDown;\n        // Calculate velocity\n        let vx = 0;\n        let vy = 0;\n        // Keyboard input\n        if (leftDown) vx -= 1;\n        if (rightDown) vx += 1;\n        if (upDown) vy -= 1;\n        if (downDown) vy += 1;\n        // Touch joystick input (takes priority if active)\n        if (this.touchInput && this.touchInput.active) {\n            vx = this.touchInput.x;\n            vy = this.touchInput.y;\n        }\n        // Normalize diagonal movement (only for keyboard)\n        if (!this.touchInput?.active && vx !== 0 && vy !== 0) {\n            vx *= 0.707;\n            vy *= 0.707;\n        }\n        // Apply velocity\n        this.sprite.setVelocity(vx * this.speed, vy * this.speed);\n        // Handle animations and direction\n        const wasMoving = this.isMoving;\n        this.isMoving = vx !== 0 || vy !== 0;\n        if (this.isMoving) {\n            // Determine direction\n            if (Math.abs(vx) > Math.abs(vy)) {\n                this.direction = vx > 0 ? 'right' : 'left';\n            } else {\n                this.direction = vy > 0 ? 'down' : 'up';\n            }\n            // Play walk animation for current direction\n            this.sprite.anims.play(`walk-${this.direction}`, true);\n        } else {\n            // Play idle animation when stopped\n            if (wasMoving) {\n                this.sprite.anims.play(`idle-${this.direction}`, true);\n            }\n        }\n        // Return current state for network broadcast\n        return {\n            x: this.sprite.x,\n            y: this.sprite.y,\n            direction: this.direction,\n            isMoving: this.isMoving\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRyxJQUFJLENBQUNFLE1BQU0sQ0FBQ0YsQ0FBQztZQUNoQkMsR0FBRyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0QsQ0FBQztZQUNoQitCLFdBQVcsSUFBSSxDQUFDQSxTQUFTO1lBQ3pCQyxVQUFVLElBQUksQ0FBQ0EsUUFBUTtRQUN6QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxHYW1pbmcgUHJvamVjdFxcQ2xvdWRUb3duXFxjbGllbnRcXGdhbWVcXGVudGl0aWVzXFxQbGF5ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xyXG4gIHNjZW5lOiBQaGFzZXIuU2NlbmU7XHJcbiAgc3ByaXRlOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3ByaXRlO1xyXG4gIHNwZWVkOiBudW1iZXI7XHJcbiAgY3Vyc29yczogUGhhc2VyLlR5cGVzLklucHV0LktleWJvYXJkLkN1cnNvcktleXM7XHJcbiAgd2FzZDoge1xyXG4gICAgdXA6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XHJcbiAgICBkb3duOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gICAgbGVmdDogUGhhc2VyLklucHV0LktleWJvYXJkLktleTtcclxuICAgIHJpZ2h0OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gIH07XHJcbiAgdG91Y2hJbnB1dDogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgYWN0aXZlOiBib29sZWFuIH07XHJcbiAgZGlyZWN0aW9uOiAndXAnIHwgJ2Rvd24nIHwgJ2xlZnQnIHwgJ3JpZ2h0JztcclxuICBpc01vdmluZzogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIHNwcml0ZSB3aXRoIHRoZSBmaXJzdCBmcmFtZVxyXG4gICAgdGhpcy5zcHJpdGUgPSBzY2VuZS5waHlzaWNzLmFkZC5zcHJpdGUoeCwgeSwgJ3BsYXllcicsIDApO1xyXG4gICAgdGhpcy5zcHJpdGUuc2V0T3JpZ2luKDAuNSwgMSk7XHJcbiAgICB0aGlzLnNwcml0ZS5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7XHJcbiAgICB0aGlzLnNwcml0ZS5zZXRTaXplKDIwLCAxMik7XHJcbiAgICB0aGlzLnNwcml0ZS5zZXRPZmZzZXQoNiwgMjApO1xyXG4gICAgXHJcbiAgICAvLyBNb3ZlbWVudCBzcGVlZFxyXG4gICAgdGhpcy5zcGVlZCA9IDE1MDtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIGFuaW1hdGlvbnNcclxuICAgIHRoaXMuY3JlYXRlQW5pbWF0aW9ucygpO1xyXG4gICAgXHJcbiAgICAvLyBTZXR1cCBrZXlib2FyZCBjb250cm9sc1xyXG4gICAgdGhpcy5jdXJzb3JzID0gc2NlbmUuaW5wdXQua2V5Ym9hcmQhLmNyZWF0ZUN1cnNvcktleXMoKTtcclxuICAgIHRoaXMud2FzZCA9IHNjZW5lLmlucHV0LmtleWJvYXJkIS5hZGRLZXlzKHtcclxuICAgICAgdXA6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5XLFxyXG4gICAgICBkb3duOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuUyxcclxuICAgICAgbGVmdDogUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLkEsXHJcbiAgICAgIHJpZ2h0OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRCxcclxuICAgIH0pIGFzIHtcclxuICAgICAgdXA6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XHJcbiAgICAgIGRvd246IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XHJcbiAgICAgIGxlZnQ6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XHJcbiAgICAgIHJpZ2h0OiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gVG91Y2gvbW9iaWxlIGpveXN0aWNrIGlucHV0XHJcbiAgICB0aGlzLnRvdWNoSW5wdXQgPSB7IHg6IDAsIHk6IDAsIGFjdGl2ZTogZmFsc2UgfTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIHZpcnR1YWwgam95c3RpY2sgZm9yIG1vYmlsZVxyXG4gICAgaWYgKHRoaXMuaXNNb2JpbGUoKSkge1xyXG4gICAgICB0aGlzLmNyZWF0ZVZpcnR1YWxKb3lzdGljaygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDdXJyZW50IGRpcmVjdGlvblxyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSAnZG93bic7XHJcbiAgICB0aGlzLmlzTW92aW5nID0gZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGlzTW9iaWxlKCkge1xyXG4gICAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSBcclxuICAgICAgfHwgd2luZG93LmlubmVyV2lkdGggPCA3Njg7XHJcbiAgfVxyXG4gIFxyXG4gIGNyZWF0ZVZpcnR1YWxKb3lzdGljaygpIHtcclxuICAgIC8vIENyZWF0ZSBqb3lzdGljayBjb250YWluZXJcclxuICAgIGNvbnN0IGpveXN0aWNrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBqb3lzdGlja0NvbnRhaW5lci5pZCA9ICd2aXJ0dWFsLWpveXN0aWNrJztcclxuICAgIGpveXN0aWNrQ29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBgXHJcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgICAgYm90dG9tOiAzMHB4O1xyXG4gICAgICBsZWZ0OiAzMHB4O1xyXG4gICAgICB3aWR0aDogMTIwcHg7XHJcbiAgICAgIGhlaWdodDogMTIwcHg7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDYwcHg7XHJcbiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTtcclxuICAgICAgYm9yZGVyOiAzcHggc29saWQgcmdiYSg0NCwgOTAsIDE2MCwgMC43KTtcclxuICAgICAgei1pbmRleDogMTAwMDA7XHJcbiAgICAgIHRvdWNoLWFjdGlvbjogbm9uZTtcclxuICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICBgO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgam95c3RpY2sga25vYlxyXG4gICAgY29uc3Qga25vYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAga25vYi5pZCA9ICdqb3lzdGljay1rbm9iJztcclxuICAgIGtub2Iuc3R5bGUuY3NzVGV4dCA9IGBcclxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICB0b3A6IDUwJTtcclxuICAgICAgbGVmdDogNTAlO1xyXG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICAgICAgd2lkdGg6IDUwcHg7XHJcbiAgICAgIGhlaWdodDogNTBweDtcclxuICAgICAgYm9yZGVyLXJhZGl1czogMjVweDtcclxuICAgICAgYmFja2dyb3VuZDogcmdiYSg0NCwgOTAsIDE2MCwgMC44KTtcclxuICAgICAgYm9yZGVyOiAycHggc29saWQgI2ZmZjtcclxuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICBgO1xyXG4gICAgam95c3RpY2tDb250YWluZXIuYXBwZW5kQ2hpbGQoa25vYik7XHJcbiAgICBcclxuICAgIC8vIEFwcGVuZCB0byBib2R5IGZvciBmaXhlZCBwb3NpdGlvbmluZ1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChqb3lzdGlja0NvbnRhaW5lcik7XHJcbiAgICBcclxuICAgIC8vIFRyYWNrIGpveXN0aWNrIHN0YXRlXHJcbiAgICBjb25zdCBqb3lzdGlja1JlY3QgPSB7IGNlbnRlclg6IDAsIGNlbnRlclk6IDAgfTtcclxuICAgIGNvbnN0IG1heERpc3RhbmNlID0gMzU7XHJcbiAgICBcclxuICAgIGNvbnN0IHVwZGF0ZUpveXN0aWNrUG9zaXRpb24gPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlY3QgPSBqb3lzdGlja0NvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgam95c3RpY2tSZWN0LmNlbnRlclggPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMjtcclxuICAgICAgam95c3RpY2tSZWN0LmNlbnRlclkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IGhhbmRsZVRvdWNoID0gKGU6IFRvdWNoRXZlbnQpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCB0b3VjaCA9IGUudG91Y2hlc1swXSB8fCBlLmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgICB1cGRhdGVKb3lzdGlja1Bvc2l0aW9uKCk7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgZHggPSB0b3VjaC5jbGllbnRYIC0gam95c3RpY2tSZWN0LmNlbnRlclg7XHJcbiAgICAgIGxldCBkeSA9IHRvdWNoLmNsaWVudFkgLSBqb3lzdGlja1JlY3QuY2VudGVyWTtcclxuICAgICAgXHJcbiAgICAgIC8vIExpbWl0IGRpc3RhbmNlXHJcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcclxuICAgICAgaWYgKGRpc3RhbmNlID4gbWF4RGlzdGFuY2UpIHtcclxuICAgICAgICBkeCA9IChkeCAvIGRpc3RhbmNlKSAqIG1heERpc3RhbmNlO1xyXG4gICAgICAgIGR5ID0gKGR5IC8gZGlzdGFuY2UpICogbWF4RGlzdGFuY2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSBrbm9iIHBvc2l0aW9uXHJcbiAgICAgIGtub2Iuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZShjYWxjKC01MCUgKyAke2R4fXB4KSwgY2FsYygtNTAlICsgJHtkeX1weCkpYDtcclxuICAgICAgXHJcbiAgICAgIC8vIE5vcm1hbGl6ZSB0byAtMSB0byAxIHJhbmdlXHJcbiAgICAgIHRoaXMudG91Y2hJbnB1dC54ID0gZHggLyBtYXhEaXN0YW5jZTtcclxuICAgICAgdGhpcy50b3VjaElucHV0LnkgPSBkeSAvIG1heERpc3RhbmNlO1xyXG4gICAgICB0aGlzLnRvdWNoSW5wdXQuYWN0aXZlID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IGhhbmRsZVRvdWNoRW5kID0gKCkgPT4ge1xyXG4gICAgICBrbm9iLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknO1xyXG4gICAgICB0aGlzLnRvdWNoSW5wdXQueCA9IDA7XHJcbiAgICAgIHRoaXMudG91Y2hJbnB1dC55ID0gMDtcclxuICAgICAgdGhpcy50b3VjaElucHV0LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gTW91c2UgaGFuZGxlcnMgKGZvciBkZXNrdG9wIHRlc3RpbmcgYW5kIGNsaWNrIHN1cHBvcnQpXHJcbiAgICBsZXQgaXNNb3VzZURvd24gPSBmYWxzZTtcclxuICAgIFxyXG4gICAgY29uc3QgaGFuZGxlTW91c2UgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoIWlzTW91c2VEb3duKSByZXR1cm47XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdXBkYXRlSm95c3RpY2tQb3NpdGlvbigpO1xyXG4gICAgICBcclxuICAgICAgbGV0IGR4ID0gZS5jbGllbnRYIC0gam95c3RpY2tSZWN0LmNlbnRlclg7XHJcbiAgICAgIGxldCBkeSA9IGUuY2xpZW50WSAtIGpveXN0aWNrUmVjdC5jZW50ZXJZO1xyXG4gICAgICBcclxuICAgICAgLy8gTGltaXQgZGlzdGFuY2VcclxuICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG4gICAgICBpZiAoZGlzdGFuY2UgPiBtYXhEaXN0YW5jZSkge1xyXG4gICAgICAgIGR4ID0gKGR4IC8gZGlzdGFuY2UpICogbWF4RGlzdGFuY2U7XHJcbiAgICAgICAgZHkgPSAoZHkgLyBkaXN0YW5jZSkgKiBtYXhEaXN0YW5jZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIGtub2IgcG9zaXRpb25cclxuICAgICAga25vYi5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKGNhbGMoLTUwJSArICR7ZHh9cHgpLCBjYWxjKC01MCUgKyAke2R5fXB4KSlgO1xyXG4gICAgICBcclxuICAgICAgLy8gTm9ybWFsaXplIHRvIC0xIHRvIDEgcmFuZ2VcclxuICAgICAgdGhpcy50b3VjaElucHV0LnggPSBkeCAvIG1heERpc3RhbmNlO1xyXG4gICAgICB0aGlzLnRvdWNoSW5wdXQueSA9IGR5IC8gbWF4RGlzdGFuY2U7XHJcbiAgICAgIHRoaXMudG91Y2hJbnB1dC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgaXNNb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICBoYW5kbGVNb3VzZShlKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoKSA9PiB7XHJcbiAgICAgIGlzTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgIGtub2Iuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKSc7XHJcbiAgICAgIHRoaXMudG91Y2hJbnB1dC54ID0gMDtcclxuICAgICAgdGhpcy50b3VjaElucHV0LnkgPSAwO1xyXG4gICAgICB0aGlzLnRvdWNoSW5wdXQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBUb3VjaCBldmVudHMgd2l0aCBwYXNzaXZlOiBmYWxzZSB0byBhbGxvdyBwcmV2ZW50RGVmYXVsdFxyXG4gICAgam95c3RpY2tDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGhhbmRsZVRvdWNoLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xyXG4gICAgam95c3RpY2tDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlVG91Y2gsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XHJcbiAgICBqb3lzdGlja0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhhbmRsZVRvdWNoRW5kLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xyXG4gICAgam95c3RpY2tDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBoYW5kbGVUb3VjaEVuZCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcclxuICAgIFxyXG4gICAgLy8gTW91c2UgZXZlbnRzXHJcbiAgICBqb3lzdGlja0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZURvd24pO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQW5pbWF0aW9ucygpIHtcclxuICAgIGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZTtcclxuICAgIFxyXG4gICAgLy8gRnJhbWUgbGF5b3V0OiA0eDQgZ3JpZCAoNCBjb2x1bW5zLCA0IHJvd3MpXHJcbiAgICAvLyBSb3cgMCAoZnJhbWVzIDAtMyk6IERvd25cclxuICAgIC8vIFJvdyAxIChmcmFtZXMgNC03KTogTGVmdFxyXG4gICAgLy8gUm93IDIgKGZyYW1lcyA4LTExKTogUmlnaHRcclxuICAgIC8vIFJvdyAzIChmcmFtZXMgMTItMTUpOiBVcFxyXG4gICAgXHJcbiAgICAvLyBEb3duIGFuaW1hdGlvblxyXG4gICAgaWYgKCFzY2VuZS5hbmltcy5leGlzdHMoJ3dhbGstZG93bicpKSB7XHJcbiAgICAgIHNjZW5lLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAga2V5OiAnd2Fsay1kb3duJyxcclxuICAgICAgICBmcmFtZXM6IHNjZW5lLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdwbGF5ZXInLCB7IHN0YXJ0OiAwLCBlbmQ6IDMgfSksXHJcbiAgICAgICAgZnJhbWVSYXRlOiA4LFxyXG4gICAgICAgIHJlcGVhdDogLTEsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBMZWZ0IGFuaW1hdGlvblxyXG4gICAgaWYgKCFzY2VuZS5hbmltcy5leGlzdHMoJ3dhbGstbGVmdCcpKSB7XHJcbiAgICAgIHNjZW5lLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAga2V5OiAnd2Fsay1sZWZ0JyxcclxuICAgICAgICBmcmFtZXM6IHNjZW5lLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdwbGF5ZXInLCB7IHN0YXJ0OiA0LCBlbmQ6IDcgfSksXHJcbiAgICAgICAgZnJhbWVSYXRlOiA4LFxyXG4gICAgICAgIHJlcGVhdDogLTEsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSaWdodCBhbmltYXRpb25cclxuICAgIGlmICghc2NlbmUuYW5pbXMuZXhpc3RzKCd3YWxrLXJpZ2h0JykpIHtcclxuICAgICAgc2NlbmUuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICBrZXk6ICd3YWxrLXJpZ2h0JyxcclxuICAgICAgICBmcmFtZXM6IHNjZW5lLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdwbGF5ZXInLCB7IHN0YXJ0OiA4LCBlbmQ6IDExIH0pLFxyXG4gICAgICAgIGZyYW1lUmF0ZTogOCxcclxuICAgICAgICByZXBlYXQ6IC0xLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVXAgYW5pbWF0aW9uXHJcbiAgICBpZiAoIXNjZW5lLmFuaW1zLmV4aXN0cygnd2Fsay11cCcpKSB7XHJcbiAgICAgIHNjZW5lLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAga2V5OiAnd2Fsay11cCcsXHJcbiAgICAgICAgZnJhbWVzOiBzY2VuZS5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygncGxheWVyJywgeyBzdGFydDogMTIsIGVuZDogMTUgfSksXHJcbiAgICAgICAgZnJhbWVSYXRlOiA4LFxyXG4gICAgICAgIHJlcGVhdDogLTEsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBJZGxlIGFuaW1hdGlvbnMgKGZpcnN0IGZyYW1lIG9mIGVhY2ggZGlyZWN0aW9uKVxyXG4gICAgY29uc3QgaWRsZUZyYW1lcyA9IHsgZG93bjogMCwgbGVmdDogNCwgcmlnaHQ6IDgsIHVwOiAxMiB9O1xyXG4gICAgT2JqZWN0LmVudHJpZXMoaWRsZUZyYW1lcykuZm9yRWFjaCgoW2RpciwgZnJhbWVdKSA9PiB7XHJcbiAgICAgIGlmICghc2NlbmUuYW5pbXMuZXhpc3RzKGBpZGxlLSR7ZGlyfWApKSB7XHJcbiAgICAgICAgc2NlbmUuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgIGtleTogYGlkbGUtJHtkaXJ9YCxcclxuICAgICAgICAgIGZyYW1lczogW3sga2V5OiAncGxheWVyJywgZnJhbWU6IGZyYW1lIH1dLFxyXG4gICAgICAgICAgZnJhbWVSYXRlOiAxLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyBkaXJlY3Rpb246ICd1cCcgfCAnZG93bicgfCAnbGVmdCcgfCAncmlnaHQnOyBpc01vdmluZzogYm9vbGVhbiB9IHtcclxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgdHlwaW5nIGluIGFuIEhUTUwgaW5wdXRcclxuICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xyXG4gICAgY29uc3QgaXNUeXBpbmcgPSBhY3RpdmVFbGVtZW50ICYmIChcclxuICAgICAgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnIHx8IFxyXG4gICAgICBhY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgXHJcbiAgICAgIGFjdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ3RydWUnXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChpc1R5cGluZykge1xyXG4gICAgICB0aGlzLnNwcml0ZS5zZXRWZWxvY2l0eSgwLCAwKTtcclxuICAgICAgdGhpcy5pc01vdmluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNwcml0ZS5hbmltcy5wbGF5KGBpZGxlLSR7dGhpcy5kaXJlY3Rpb259YCwgdHJ1ZSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogdGhpcy5zcHJpdGUueCxcclxuICAgICAgICB5OiB0aGlzLnNwcml0ZS55LFxyXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgaXNNb3Zpbmc6IGZhbHNlLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBrZXlib2FyZCBpbnB1dFxyXG4gICAgY29uc3QgbGVmdERvd24gPSB0aGlzLmN1cnNvcnMubGVmdC5pc0Rvd24gfHwgdGhpcy53YXNkLmxlZnQuaXNEb3duO1xyXG4gICAgY29uc3QgcmlnaHREb3duID0gdGhpcy5jdXJzb3JzLnJpZ2h0LmlzRG93biB8fCB0aGlzLndhc2QucmlnaHQuaXNEb3duO1xyXG4gICAgY29uc3QgdXBEb3duID0gdGhpcy5jdXJzb3JzLnVwLmlzRG93biB8fCB0aGlzLndhc2QudXAuaXNEb3duO1xyXG4gICAgY29uc3QgZG93bkRvd24gPSB0aGlzLmN1cnNvcnMuZG93bi5pc0Rvd24gfHwgdGhpcy53YXNkLmRvd24uaXNEb3duO1xyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgdmVsb2NpdHlcclxuICAgIGxldCB2eCA9IDA7XHJcbiAgICBsZXQgdnkgPSAwO1xyXG4gICAgXHJcbiAgICAvLyBLZXlib2FyZCBpbnB1dFxyXG4gICAgaWYgKGxlZnREb3duKSB2eCAtPSAxO1xyXG4gICAgaWYgKHJpZ2h0RG93bikgdnggKz0gMTtcclxuICAgIGlmICh1cERvd24pIHZ5IC09IDE7XHJcbiAgICBpZiAoZG93bkRvd24pIHZ5ICs9IDE7XHJcbiAgICBcclxuICAgIC8vIFRvdWNoIGpveXN0aWNrIGlucHV0ICh0YWtlcyBwcmlvcml0eSBpZiBhY3RpdmUpXHJcbiAgICBpZiAodGhpcy50b3VjaElucHV0ICYmIHRoaXMudG91Y2hJbnB1dC5hY3RpdmUpIHtcclxuICAgICAgdnggPSB0aGlzLnRvdWNoSW5wdXQueDtcclxuICAgICAgdnkgPSB0aGlzLnRvdWNoSW5wdXQueTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTm9ybWFsaXplIGRpYWdvbmFsIG1vdmVtZW50IChvbmx5IGZvciBrZXlib2FyZClcclxuICAgIGlmICghdGhpcy50b3VjaElucHV0Py5hY3RpdmUgJiYgdnggIT09IDAgJiYgdnkgIT09IDApIHtcclxuICAgICAgdnggKj0gMC43MDc7XHJcbiAgICAgIHZ5ICo9IDAuNzA3O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBcHBseSB2ZWxvY2l0eVxyXG4gICAgdGhpcy5zcHJpdGUuc2V0VmVsb2NpdHkodnggKiB0aGlzLnNwZWVkLCB2eSAqIHRoaXMuc3BlZWQpO1xyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgYW5pbWF0aW9ucyBhbmQgZGlyZWN0aW9uXHJcbiAgICBjb25zdCB3YXNNb3ZpbmcgPSB0aGlzLmlzTW92aW5nO1xyXG4gICAgdGhpcy5pc01vdmluZyA9IHZ4ICE9PSAwIHx8IHZ5ICE9PSAwO1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5pc01vdmluZykge1xyXG4gICAgICAvLyBEZXRlcm1pbmUgZGlyZWN0aW9uXHJcbiAgICAgIGlmIChNYXRoLmFicyh2eCkgPiBNYXRoLmFicyh2eSkpIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHZ4ID4gMCA/ICdyaWdodCcgOiAnbGVmdCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSB2eSA+IDAgPyAnZG93bicgOiAndXAnO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBQbGF5IHdhbGsgYW5pbWF0aW9uIGZvciBjdXJyZW50IGRpcmVjdGlvblxyXG4gICAgICB0aGlzLnNwcml0ZS5hbmltcy5wbGF5KGB3YWxrLSR7dGhpcy5kaXJlY3Rpb259YCwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBQbGF5IGlkbGUgYW5pbWF0aW9uIHdoZW4gc3RvcHBlZFxyXG4gICAgICBpZiAod2FzTW92aW5nKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUuYW5pbXMucGxheShgaWRsZS0ke3RoaXMuZGlyZWN0aW9ufWAsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIGN1cnJlbnQgc3RhdGUgZm9yIG5ldHdvcmsgYnJvYWRjYXN0XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0aGlzLnNwcml0ZS54LFxyXG4gICAgICB5OiB0aGlzLnNwcml0ZS55LFxyXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxyXG4gICAgICBpc01vdmluZzogdGhpcy5pc01vdmluZyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQaGFzZXIiLCJQbGF5ZXIiLCJzY2VuZSIsIngiLCJ5Iiwic3ByaXRlIiwicGh5c2ljcyIsImFkZCIsInNldE9yaWdpbiIsInNldENvbGxpZGVXb3JsZEJvdW5kcyIsInNldFNpemUiLCJzZXRPZmZzZXQiLCJzcGVlZCIsImNyZWF0ZUFuaW1hdGlvbnMiLCJjdXJzb3JzIiwiaW5wdXQiLCJrZXlib2FyZCIsImNyZWF0ZUN1cnNvcktleXMiLCJ3YXNkIiwiYWRkS2V5cyIsInVwIiwiSW5wdXQiLCJLZXlib2FyZCIsIktleUNvZGVzIiwiVyIsImRvd24iLCJTIiwibGVmdCIsIkEiLCJyaWdodCIsIkQiLCJ0b3VjaElucHV0IiwiYWN0aXZlIiwiaXNNb2JpbGUiLCJjcmVhdGVWaXJ0dWFsSm95c3RpY2siLCJkaXJlY3Rpb24iLCJpc01vdmluZyIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiam95c3RpY2tDb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsInN0eWxlIiwiY3NzVGV4dCIsImtub2IiLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJqb3lzdGlja1JlY3QiLCJjZW50ZXJYIiwiY2VudGVyWSIsIm1heERpc3RhbmNlIiwidXBkYXRlSm95c3RpY2tQb3NpdGlvbiIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsInRvcCIsImhlaWdodCIsImhhbmRsZVRvdWNoIiwiZSIsInByZXZlbnREZWZhdWx0IiwidG91Y2giLCJ0b3VjaGVzIiwiY2hhbmdlZFRvdWNoZXMiLCJkeCIsImNsaWVudFgiLCJkeSIsImNsaWVudFkiLCJkaXN0YW5jZSIsIk1hdGgiLCJzcXJ0IiwidHJhbnNmb3JtIiwiaGFuZGxlVG91Y2hFbmQiLCJpc01vdXNlRG93biIsImhhbmRsZU1vdXNlIiwiaGFuZGxlTW91c2VEb3duIiwiaGFuZGxlTW91c2VVcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwiYW5pbXMiLCJleGlzdHMiLCJjcmVhdGUiLCJrZXkiLCJmcmFtZXMiLCJnZW5lcmF0ZUZyYW1lTnVtYmVycyIsInN0YXJ0IiwiZW5kIiwiZnJhbWVSYXRlIiwicmVwZWF0IiwiaWRsZUZyYW1lcyIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwiZGlyIiwiZnJhbWUiLCJ1cGRhdGUiLCJhY3RpdmVFbGVtZW50IiwiaXNUeXBpbmciLCJ0YWdOYW1lIiwiZ2V0QXR0cmlidXRlIiwic2V0VmVsb2NpdHkiLCJwbGF5IiwibGVmdERvd24iLCJpc0Rvd24iLCJyaWdodERvd24iLCJ1cERvd24iLCJkb3duRG93biIsInZ4IiwidnkiLCJ3YXNNb3ZpbmciLCJhYnMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./game/entities/Player.ts\n");

/***/ }),

/***/ "(ssr)/./game/entities/RemotePlayer.ts":
/*!***************************************!*\
  !*** ./game/entities/RemotePlayer.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RemotePlayer)\n/* harmony export */ });\nclass RemotePlayer {\n    constructor(scene, data){\n        this.scene = scene;\n        this.id = data.id;\n        this.targetX = data.x;\n        this.targetY = data.y;\n        this.direction = data.direction;\n        this.isMoving = data.isMoving;\n        this.lerpSpeed = 0.15;\n        this.profile = data.profile;\n        // Create physics sprite for collision detection\n        this.sprite = scene.physics.add.sprite(data.x, data.y, 'player', 0);\n        this.sprite.setOrigin(0.5, 1);\n        this.sprite.setDepth(data.y);\n        this.sprite.setAlpha(0.95);\n        // Set up physics body\n        this.sprite.body?.setSize(20, 12);\n        this.sprite.body?.setOffset(6, 20);\n        this.sprite.setImmovable(true);\n        this.sprite.setPushable(false);\n        // Make sprite interactive (clickable + hover)\n        this.sprite.setInteractive({\n            useHandCursor: true\n        });\n        this.sprite.on('pointerdown', ()=>{\n            this.showProfile();\n        });\n        // Hover events for name tag\n        this.sprite.on('pointerover', ()=>{\n            this.nameContainer.setVisible(true);\n            this.sprite.setAlpha(1);\n        });\n        this.sprite.on('pointerout', ()=>{\n            this.nameContainer.setVisible(false);\n            this.sprite.setAlpha(0.95);\n        });\n        // Create name container (hidden by default)\n        this.nameContainer = scene.add.container(data.x, data.y - 50);\n        this.nameContainer.setDepth(100000);\n        this.nameContainer.setVisible(false);\n        // Create clean, readable name text\n        this.nameText = scene.add.text(0, 0, data.name, {\n            fontFamily: '\"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif',\n            fontSize: '16px',\n            color: '#ffffff',\n            fontStyle: 'bold',\n            stroke: '#000000',\n            strokeThickness: 4\n        });\n        this.nameText.setOrigin(0.5, 0.5);\n        this.nameText.setShadow(0, 2, 'rgba(0,0,0,0.5)', 2, true, true);\n        this.nameContainer.add(this.nameText);\n        // Create animations if not already created\n        this.createAnimations();\n    }\n    showProfile() {\n        const win = window;\n        if (win.viewPlayerProfile) {\n            const profile = this.profile || {\n                username: this.nameText.text,\n                about: ''\n            };\n            win.viewPlayerProfile(profile);\n        }\n    }\n    createAnimations() {\n        const scene = this.scene;\n        const directions = [\n            'down',\n            'left',\n            'right',\n            'up'\n        ];\n        const startFrames = [\n            0,\n            4,\n            8,\n            12\n        ];\n        directions.forEach((dir, index)=>{\n            const walkKey = `walk-${dir}`;\n            const idleKey = `idle-${dir}`;\n            if (!scene.anims.exists(walkKey)) {\n                scene.anims.create({\n                    key: walkKey,\n                    frames: scene.anims.generateFrameNumbers('player', {\n                        start: startFrames[index],\n                        end: startFrames[index] + 3\n                    }),\n                    frameRate: 8,\n                    repeat: -1\n                });\n            }\n            if (!scene.anims.exists(idleKey)) {\n                scene.anims.create({\n                    key: idleKey,\n                    frames: [\n                        {\n                            key: 'player',\n                            frame: startFrames[index]\n                        }\n                    ],\n                    frameRate: 1\n                });\n            }\n        });\n    }\n    updateFromNetwork(data) {\n        this.targetX = data.x;\n        this.targetY = data.y;\n        this.direction = data.direction;\n        this.isMoving = data.isMoving;\n        if (data.profile) {\n            this.profile = data.profile;\n            this.nameText.setText(data.profile.username || data.name);\n        }\n    }\n    update() {\n        // Interpolate position smoothly\n        const dx = this.targetX - this.sprite.x;\n        const dy = this.targetY - this.sprite.y;\n        if (Math.abs(dx) > 1 || Math.abs(dy) > 1) {\n            this.sprite.x += dx * this.lerpSpeed;\n            this.sprite.y += dy * this.lerpSpeed;\n        } else {\n            this.sprite.x = this.targetX;\n            this.sprite.y = this.targetY;\n        }\n        // Update depth based on Y position\n        this.sprite.setDepth(this.sprite.y);\n        // Update name position\n        this.nameContainer.setPosition(this.sprite.x, this.sprite.y - 40);\n        // Update animation\n        if (this.isMoving) {\n            this.sprite.anims.play(`walk-${this.direction}`, true);\n        } else {\n            this.sprite.anims.play(`idle-${this.direction}`, true);\n        }\n    }\n    getSprite() {\n        return this.sprite;\n    }\n    destroy() {\n        this.sprite.destroy();\n        this.nameContainer.destroy();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDTCxDQUFDO1FBRWxDLHVCQUF1QjtRQUN2QixJQUFJLENBQUNvQixhQUFhLENBQUM0QyxXQUFXLENBQUMsSUFBSSxDQUFDM0QsTUFBTSxDQUFDUCxDQUFDLEVBQUUsSUFBSSxDQUFDTyxNQUFNLENBQUNMLENBQUMsR0FBRztRQUU5RCxtQkFBbUI7UUFDbkIsSUFBSSxJQUFJLENBQUNFLFFBQVEsRUFBRTtZQUNqQixJQUFJLENBQUNHLE1BQU0sQ0FBQ3lDLEtBQUssQ0FBQ21CLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUNoRSxTQUFTLEVBQUUsRUFBRTtRQUNuRCxPQUFPO1lBQ0wsSUFBSSxDQUFDSSxNQUFNLENBQUN5QyxLQUFLLENBQUNtQixJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDaEUsU0FBUyxFQUFFLEVBQUU7UUFDbkQ7SUFDRjtJQUVBaUUsWUFBMEM7UUFDeEMsT0FBTyxJQUFJLENBQUM3RCxNQUFNO0lBQ3BCO0lBRUE4RCxVQUFVO1FBQ1IsSUFBSSxDQUFDOUQsTUFBTSxDQUFDOEQsT0FBTztRQUNuQixJQUFJLENBQUMvQyxhQUFhLENBQUMrQyxPQUFPO0lBQzVCO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxHYW1pbmcgUHJvamVjdFxcQ2xvdWRUb3duXFxjbGllbnRcXGdhbWVcXGVudGl0aWVzXFxSZW1vdGVQbGF5ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlbW90ZVBsYXllckRhdGEge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbiAgZGlyZWN0aW9uOiAndXAnIHwgJ2Rvd24nIHwgJ2xlZnQnIHwgJ3JpZ2h0JztcclxuICBpc01vdmluZzogYm9vbGVhbjtcclxuICBwcm9maWxlPzoge1xyXG4gICAgdXNlcm5hbWU6IHN0cmluZztcclxuICAgIGFib3V0OiBzdHJpbmc7XHJcbiAgICBsaW5rZWRpbj86IHN0cmluZztcclxuICAgIHR3aXR0ZXI/OiBzdHJpbmc7XHJcbiAgICBwb3J0Zm9saW8/OiBzdHJpbmc7XHJcbiAgICBnaXRodWI/OiBzdHJpbmc7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVtb3RlUGxheWVyIHtcclxuICBzY2VuZTogUGhhc2VyLlNjZW5lO1xyXG4gIHNwcml0ZTogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZTtcclxuICBuYW1lQ29udGFpbmVyOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xyXG4gIG5hbWVUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRhcmdldFg6IG51bWJlcjtcclxuICB0YXJnZXRZOiBudW1iZXI7XHJcbiAgZGlyZWN0aW9uOiBzdHJpbmc7XHJcbiAgaXNNb3Zpbmc6IGJvb2xlYW47XHJcbiAgbGVycFNwZWVkOiBudW1iZXI7XHJcbiAgcHJvZmlsZT86IFJlbW90ZVBsYXllckRhdGFbJ3Byb2ZpbGUnXTtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgZGF0YTogUmVtb3RlUGxheWVyRGF0YSkge1xyXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xyXG4gICAgdGhpcy5pZCA9IGRhdGEuaWQ7XHJcbiAgICB0aGlzLnRhcmdldFggPSBkYXRhLng7XHJcbiAgICB0aGlzLnRhcmdldFkgPSBkYXRhLnk7XHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRhdGEuZGlyZWN0aW9uO1xyXG4gICAgdGhpcy5pc01vdmluZyA9IGRhdGEuaXNNb3Zpbmc7XHJcbiAgICB0aGlzLmxlcnBTcGVlZCA9IDAuMTU7XHJcbiAgICB0aGlzLnByb2ZpbGUgPSBkYXRhLnByb2ZpbGU7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHBoeXNpY3Mgc3ByaXRlIGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uXHJcbiAgICB0aGlzLnNwcml0ZSA9IHNjZW5lLnBoeXNpY3MuYWRkLnNwcml0ZShkYXRhLngsIGRhdGEueSwgJ3BsYXllcicsIDApO1xyXG4gICAgdGhpcy5zcHJpdGUuc2V0T3JpZ2luKDAuNSwgMSk7XHJcbiAgICB0aGlzLnNwcml0ZS5zZXREZXB0aChkYXRhLnkpO1xyXG4gICAgdGhpcy5zcHJpdGUuc2V0QWxwaGEoMC45NSk7XHJcbiAgICBcclxuICAgIC8vIFNldCB1cCBwaHlzaWNzIGJvZHlcclxuICAgIHRoaXMuc3ByaXRlLmJvZHk/LnNldFNpemUoMjAsIDEyKTtcclxuICAgIHRoaXMuc3ByaXRlLmJvZHk/LnNldE9mZnNldCg2LCAyMCk7XHJcbiAgICB0aGlzLnNwcml0ZS5zZXRJbW1vdmFibGUodHJ1ZSk7XHJcbiAgICB0aGlzLnNwcml0ZS5zZXRQdXNoYWJsZShmYWxzZSk7XHJcblxyXG4gICAgLy8gTWFrZSBzcHJpdGUgaW50ZXJhY3RpdmUgKGNsaWNrYWJsZSArIGhvdmVyKVxyXG4gICAgdGhpcy5zcHJpdGUuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xyXG4gICAgdGhpcy5zcHJpdGUub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLnNob3dQcm9maWxlKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gSG92ZXIgZXZlbnRzIGZvciBuYW1lIHRhZ1xyXG4gICAgdGhpcy5zcHJpdGUub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLm5hbWVDb250YWluZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgdGhpcy5zcHJpdGUuc2V0QWxwaGEoMSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5zcHJpdGUub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMubmFtZUNvbnRhaW5lci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgdGhpcy5zcHJpdGUuc2V0QWxwaGEoMC45NSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDcmVhdGUgbmFtZSBjb250YWluZXIgKGhpZGRlbiBieSBkZWZhdWx0KVxyXG4gICAgdGhpcy5uYW1lQ29udGFpbmVyID0gc2NlbmUuYWRkLmNvbnRhaW5lcihkYXRhLngsIGRhdGEueSAtIDUwKTtcclxuICAgIHRoaXMubmFtZUNvbnRhaW5lci5zZXREZXB0aCgxMDAwMDApO1xyXG4gICAgdGhpcy5uYW1lQ29udGFpbmVyLnNldFZpc2libGUoZmFsc2UpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBjbGVhbiwgcmVhZGFibGUgbmFtZSB0ZXh0XHJcbiAgICB0aGlzLm5hbWVUZXh0ID0gc2NlbmUuYWRkLnRleHQoMCwgMCwgZGF0YS5uYW1lLCB7XHJcbiAgICAgIGZvbnRGYW1pbHk6ICdcIlNlZ29lIFVJXCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWYnLFxyXG4gICAgICBmb250U2l6ZTogJzE2cHgnLFxyXG4gICAgICBjb2xvcjogJyNmZmZmZmYnLFxyXG4gICAgICBmb250U3R5bGU6ICdib2xkJyxcclxuICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXHJcbiAgICAgIHN0cm9rZVRoaWNrbmVzczogNCxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5uYW1lVGV4dC5zZXRPcmlnaW4oMC41LCAwLjUpO1xyXG4gICAgdGhpcy5uYW1lVGV4dC5zZXRTaGFkb3coMCwgMiwgJ3JnYmEoMCwwLDAsMC41KScsIDIsIHRydWUsIHRydWUpO1xyXG4gICAgdGhpcy5uYW1lQ29udGFpbmVyLmFkZCh0aGlzLm5hbWVUZXh0KTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYW5pbWF0aW9ucyBpZiBub3QgYWxyZWFkeSBjcmVhdGVkXHJcbiAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNob3dQcm9maWxlKCkge1xyXG4gICAgY29uc3Qgd2luID0gd2luZG93IGFzIHVua25vd24gYXMgeyB2aWV3UGxheWVyUHJvZmlsZT86IChwcm9maWxlOiB1bmtub3duKSA9PiB2b2lkIH07XHJcbiAgICBpZiAod2luLnZpZXdQbGF5ZXJQcm9maWxlKSB7XHJcbiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGUgfHwge1xyXG4gICAgICAgIHVzZXJuYW1lOiB0aGlzLm5hbWVUZXh0LnRleHQsXHJcbiAgICAgICAgYWJvdXQ6ICcnLFxyXG4gICAgICB9O1xyXG4gICAgICB3aW4udmlld1BsYXllclByb2ZpbGUocHJvZmlsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVBbmltYXRpb25zKCkge1xyXG4gICAgY29uc3Qgc2NlbmUgPSB0aGlzLnNjZW5lO1xyXG4gICAgY29uc3QgZGlyZWN0aW9ucyA9IFsnZG93bicsICdsZWZ0JywgJ3JpZ2h0JywgJ3VwJ107XHJcbiAgICBjb25zdCBzdGFydEZyYW1lcyA9IFswLCA0LCA4LCAxMl07XHJcblxyXG4gICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXIsIGluZGV4KSA9PiB7XHJcbiAgICAgIGNvbnN0IHdhbGtLZXkgPSBgd2Fsay0ke2Rpcn1gO1xyXG4gICAgICBjb25zdCBpZGxlS2V5ID0gYGlkbGUtJHtkaXJ9YDtcclxuXHJcbiAgICAgIGlmICghc2NlbmUuYW5pbXMuZXhpc3RzKHdhbGtLZXkpKSB7XHJcbiAgICAgICAgc2NlbmUuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgIGtleTogd2Fsa0tleSxcclxuICAgICAgICAgIGZyYW1lczogc2NlbmUuYW5pbXMuZ2VuZXJhdGVGcmFtZU51bWJlcnMoJ3BsYXllcicsIHtcclxuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0RnJhbWVzW2luZGV4XSxcclxuICAgICAgICAgICAgZW5kOiBzdGFydEZyYW1lc1tpbmRleF0gKyAzLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBmcmFtZVJhdGU6IDgsXHJcbiAgICAgICAgICByZXBlYXQ6IC0xLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXNjZW5lLmFuaW1zLmV4aXN0cyhpZGxlS2V5KSkge1xyXG4gICAgICAgIHNjZW5lLmFuaW1zLmNyZWF0ZSh7XHJcbiAgICAgICAgICBrZXk6IGlkbGVLZXksXHJcbiAgICAgICAgICBmcmFtZXM6IFt7IGtleTogJ3BsYXllcicsIGZyYW1lOiBzdGFydEZyYW1lc1tpbmRleF0gfV0sXHJcbiAgICAgICAgICBmcmFtZVJhdGU6IDEsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRnJvbU5ldHdvcmsoZGF0YTogUmVtb3RlUGxheWVyRGF0YSkge1xyXG4gICAgdGhpcy50YXJnZXRYID0gZGF0YS54O1xyXG4gICAgdGhpcy50YXJnZXRZID0gZGF0YS55O1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBkYXRhLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuaXNNb3ZpbmcgPSBkYXRhLmlzTW92aW5nO1xyXG4gICAgaWYgKGRhdGEucHJvZmlsZSkge1xyXG4gICAgICB0aGlzLnByb2ZpbGUgPSBkYXRhLnByb2ZpbGU7XHJcbiAgICAgIHRoaXMubmFtZVRleHQuc2V0VGV4dChkYXRhLnByb2ZpbGUudXNlcm5hbWUgfHwgZGF0YS5uYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIC8vIEludGVycG9sYXRlIHBvc2l0aW9uIHNtb290aGx5XHJcbiAgICBjb25zdCBkeCA9IHRoaXMudGFyZ2V0WCAtIHRoaXMuc3ByaXRlLng7XHJcbiAgICBjb25zdCBkeSA9IHRoaXMudGFyZ2V0WSAtIHRoaXMuc3ByaXRlLnk7XHJcblxyXG4gICAgaWYgKE1hdGguYWJzKGR4KSA+IDEgfHwgTWF0aC5hYnMoZHkpID4gMSkge1xyXG4gICAgICB0aGlzLnNwcml0ZS54ICs9IGR4ICogdGhpcy5sZXJwU3BlZWQ7XHJcbiAgICAgIHRoaXMuc3ByaXRlLnkgKz0gZHkgKiB0aGlzLmxlcnBTcGVlZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc3ByaXRlLnggPSB0aGlzLnRhcmdldFg7XHJcbiAgICAgIHRoaXMuc3ByaXRlLnkgPSB0aGlzLnRhcmdldFk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGRlcHRoIGJhc2VkIG9uIFkgcG9zaXRpb25cclxuICAgIHRoaXMuc3ByaXRlLnNldERlcHRoKHRoaXMuc3ByaXRlLnkpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBuYW1lIHBvc2l0aW9uXHJcbiAgICB0aGlzLm5hbWVDb250YWluZXIuc2V0UG9zaXRpb24odGhpcy5zcHJpdGUueCwgdGhpcy5zcHJpdGUueSAtIDQwKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgYW5pbWF0aW9uXHJcbiAgICBpZiAodGhpcy5pc01vdmluZykge1xyXG4gICAgICB0aGlzLnNwcml0ZS5hbmltcy5wbGF5KGB3YWxrLSR7dGhpcy5kaXJlY3Rpb259YCwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNwcml0ZS5hbmltcy5wbGF5KGBpZGxlLSR7dGhpcy5kaXJlY3Rpb259YCwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRTcHJpdGUoKTogUGhhc2VyLlBoeXNpY3MuQXJjYWRlLlNwcml0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zcHJpdGU7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgdGhpcy5zcHJpdGUuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5uYW1lQ29udGFpbmVyLmRlc3Ryb3koKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlbW90ZVBsYXllciIsInNjZW5lIiwiZGF0YSIsImlkIiwidGFyZ2V0WCIsIngiLCJ0YXJnZXRZIiwieSIsImRpcmVjdGlvbiIsImlzTW92aW5nIiwibGVycFNwZWVkIiwicHJvZmlsZSIsInNwcml0ZSIsInBoeXNpY3MiLCJhZGQiLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsInNldEFscGhhIiwiYm9keSIsInNldFNpemUiLCJzZXRPZmZzZXQiLCJzZXRJbW1vdmFibGUiLCJzZXRQdXNoYWJsZSIsInNldEludGVyYWN0aXZlIiwidXNlSGFuZEN1cnNvciIsIm9uIiwic2hvd1Byb2ZpbGUiLCJuYW1lQ29udGFpbmVyIiwic2V0VmlzaWJsZSIsImNvbnRhaW5lciIsIm5hbWVUZXh0IiwidGV4dCIsIm5hbWUiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsImZvbnRTdHlsZSIsInN0cm9rZSIsInN0cm9rZVRoaWNrbmVzcyIsInNldFNoYWRvdyIsImNyZWF0ZUFuaW1hdGlvbnMiLCJ3aW4iLCJ3aW5kb3ciLCJ2aWV3UGxheWVyUHJvZmlsZSIsInVzZXJuYW1lIiwiYWJvdXQiLCJkaXJlY3Rpb25zIiwic3RhcnRGcmFtZXMiLCJmb3JFYWNoIiwiZGlyIiwiaW5kZXgiLCJ3YWxrS2V5IiwiaWRsZUtleSIsImFuaW1zIiwiZXhpc3RzIiwiY3JlYXRlIiwia2V5IiwiZnJhbWVzIiwiZ2VuZXJhdGVGcmFtZU51bWJlcnMiLCJzdGFydCIsImVuZCIsImZyYW1lUmF0ZSIsInJlcGVhdCIsImZyYW1lIiwidXBkYXRlRnJvbU5ldHdvcmsiLCJzZXRUZXh0IiwidXBkYXRlIiwiZHgiLCJkeSIsIk1hdGgiLCJhYnMiLCJzZXRQb3NpdGlvbiIsInBsYXkiLCJnZXRTcHJpdGUiLCJkZXN0cm95Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./game/entities/RemotePlayer.ts\n");

/***/ }),

/***/ "(ssr)/./game/multiplayer/NetworkManager.ts":
/*!********************************************!*\
  !*** ./game/multiplayer/NetworkManager.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ NetworkManager)\n/* harmony export */ });\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ \"(ssr)/./node_modules/.pnpm/socket.io-client@4.8.3/node_modules/socket.io-client/build/esm-debug/index.js\");\n\nconst SOCKET_SERVER_URL = \"https://cloudtownbackend-production.up.railway.app\" || 0;\nclass NetworkManager {\n    constructor(roomId, userId, userName, userImage, userProfile){\n        this.socket = null;\n        this.messageHandlers = [];\n        this.lastBroadcastTime = 0;\n        this.broadcastInterval = 50; // ~20 FPS\n        this.roomId = roomId;\n        this.userId = userId;\n        this.userName = userName;\n        this.userImage = userImage;\n        this.userProfile = userProfile;\n    }\n    async connect() {\n        try {\n            // Connect to Socket.io server\n            this.socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(SOCKET_SERVER_URL, {\n                transports: [\n                    'websocket',\n                    'polling'\n                ]\n            });\n            // Wait for connection\n            await new Promise((resolve, reject)=>{\n                const timeout = setTimeout(()=>{\n                    reject(new Error('Connection timeout'));\n                }, 10000);\n                this.socket.on('connect', ()=>{\n                    clearTimeout(timeout);\n                    console.log('[NetworkManager] Connected to server');\n                    resolve();\n                });\n                this.socket.on('connect_error', (err)=>{\n                    clearTimeout(timeout);\n                    console.error('[NetworkManager] Connection error:', err);\n                    reject(err);\n                });\n            });\n            // Join the room\n            this.socket.emit('joinRoom', {\n                roomId: this.roomId,\n                userId: this.userId,\n                userName: this.userName,\n                userImage: this.userImage,\n                userProfile: this.userProfile\n            });\n            // Handle joined room (get existing players)\n            // Handle joined room (get existing players)\n            this.socket.on('joinedRoom', (data)=>{\n                console.log(`[NetworkManager] Joined room with ${data.players.length} existing players`);\n                // Update own profile if server sent one (it's the source of truth)\n                if (data.myProfile) {\n                    console.log('[NetworkManager] Received authoritative profile from server', data.myProfile);\n                    this.userProfile = data.myProfile;\n                    this.userName = data.myProfile.username;\n                    this.notifyHandlers({\n                        type: 'self-profile-update',\n                        data: data.myProfile\n                    });\n                }\n                data.players.forEach((player)=>{\n                    this.notifyHandlers({\n                        type: 'player-join',\n                        data: player\n                    });\n                });\n            });\n            // Handle new player joining\n            this.socket.on('playerJoined', (player)=>{\n                console.log(`[NetworkManager] Player joined: ${player.name}`);\n                this.notifyHandlers({\n                    type: 'player-join',\n                    data: player\n                });\n            });\n            // Handle player movement\n            this.socket.on('playerMoved', (data)=>{\n                this.notifyHandlers({\n                    type: 'player-update',\n                    data\n                });\n            });\n            // Handle profile updates\n            this.socket.on('playerProfileUpdated', (data)=>{\n                console.log(`[NetworkManager] Player ${data.name} updated profile`);\n                // We synthesize a player-update message with the new profile\n                this.notifyHandlers({\n                    type: 'player-update',\n                    data: {\n                        id: data.id,\n                        name: data.name,\n                        x: 0,\n                        // but we should ideally just trigger profile update.\n                        // For now reusing player-update is easiest if GameScene handles it.\n                        y: 0,\n                        direction: 'down',\n                        isMoving: false,\n                        profile: data.profile\n                    }\n                });\n            });\n            // Handle player leaving\n            this.socket.on('playerLeft', (data)=>{\n                console.log(`[NetworkManager] Player left: ${data.id}`);\n                this.notifyHandlers({\n                    type: 'player-leave',\n                    data\n                });\n            });\n            // Handle errors\n            this.socket.on('error', (err)=>{\n                console.error('[NetworkManager] Error:', err.message);\n            });\n            console.log(`[NetworkManager] Joined room: ${this.roomId} as ${this.userName}`);\n        } catch (error) {\n            console.error('[NetworkManager] Failed to connect:', error);\n            throw error;\n        }\n    }\n    async disconnect() {\n        if (this.socket) {\n            this.socket.disconnect();\n            this.socket = null;\n        }\n        console.log(`[NetworkManager] Disconnected from room: ${this.roomId}`);\n    }\n    updateProfile(profile) {\n        this.userProfile = profile;\n        this.userName = profile.username;\n        if (this.socket?.connected) {\n            this.socket.emit('updateProfile', profile);\n        }\n    }\n    onMessage(handler) {\n        this.messageHandlers.push(handler);\n    }\n    notifyHandlers(message) {\n        this.messageHandlers.forEach((handler)=>handler(message));\n    }\n    broadcastPlayerUpdate(playerData) {\n        const now = Date.now();\n        if (now - this.lastBroadcastTime < this.broadcastInterval) {\n            return; // Throttle updates\n        }\n        this.lastBroadcastTime = now;\n        if (this.socket?.connected) {\n            this.socket.emit('move', {\n                x: playerData.x,\n                y: playerData.y,\n                direction: playerData.direction,\n                isMoving: playerData.isMoving\n            });\n        }\n    }\n    broadcastObjectInteraction(objectId, action) {\n        if (this.socket?.connected) {\n            this.socket.emit('interact', {\n                objectId,\n                action\n            });\n        }\n    }\n    getUserId() {\n        return this.userId;\n    }\n    getUserName() {\n        return this.userName;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDL0JDLFVBQVVVLFdBQVdWLFFBQVE7WUFDL0I7UUFDRjtJQUNGO0lBRUFhLDJCQUEyQkMsUUFBZ0IsRUFBRUMsTUFBYyxFQUFFO1FBQzNELElBQUksSUFBSSxDQUFDaEQsTUFBTSxFQUFFc0MsV0FBVztZQUMxQixJQUFJLENBQUN0QyxNQUFNLENBQUNrQixJQUFJLENBQUMsWUFBWTtnQkFBRTZCO2dCQUFVQztZQUFPO1FBQ2xEO0lBQ0Y7SUFFQUMsWUFBWTtRQUNWLE9BQU8sSUFBSSxDQUFDckQsTUFBTTtJQUNwQjtJQUVBc0QsY0FBYztRQUNaLE9BQU8sSUFBSSxDQUFDckQsUUFBUTtJQUN0QjtBQUNGIiwic291cmNlcyI6WyJEOlxccHJvamVjdFxcR2FtaW5nIFByb2plY3RcXENsb3VkVG93blxcY2xpZW50XFxnYW1lXFxtdWx0aXBsYXllclxcTmV0d29ya01hbmFnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW8sIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xyXG5pbXBvcnQgdHlwZSB7IFBsYXllckRhdGEsIE11bHRpcGxheWVyTWVzc2FnZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxudHlwZSBNZXNzYWdlSGFuZGxlciA9IChtZXNzYWdlOiBNdWx0aXBsYXllck1lc3NhZ2UpID0+IHZvaWQ7XHJcblxyXG5jb25zdCBTT0NLRVRfU0VSVkVSX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NPQ0tFVF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvZmlsZURhdGEge1xyXG4gIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgYWJvdXQ6IHN0cmluZztcclxuICBsaW5rZWRpbj86IHN0cmluZztcclxuICB0d2l0dGVyPzogc3RyaW5nO1xyXG4gIHBvcnRmb2xpbz86IHN0cmluZztcclxuICBnaXRodWI/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ldHdvcmtNYW5hZ2VyIHtcclxuICBwcml2YXRlIHJvb21JZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgdXNlcklkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSB1c2VyTmFtZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgdXNlckltYWdlPzogc3RyaW5nO1xyXG4gIHByaXZhdGUgdXNlclByb2ZpbGU/OiBQcm9maWxlRGF0YTtcclxuICBwcml2YXRlIHNvY2tldDogU29ja2V0IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBtZXNzYWdlSGFuZGxlcnM6IE1lc3NhZ2VIYW5kbGVyW10gPSBbXTtcclxuICBwcml2YXRlIGxhc3RCcm9hZGNhc3RUaW1lOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgYnJvYWRjYXN0SW50ZXJ2YWw6IG51bWJlciA9IDUwOyAvLyB+MjAgRlBTXHJcblxyXG4gIGNvbnN0cnVjdG9yKHJvb21JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgdXNlck5hbWU6IHN0cmluZywgdXNlckltYWdlPzogc3RyaW5nLCB1c2VyUHJvZmlsZT86IFByb2ZpbGVEYXRhKSB7XHJcbiAgICB0aGlzLnJvb21JZCA9IHJvb21JZDtcclxuICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy51c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy51c2VySW1hZ2UgPSB1c2VySW1hZ2U7XHJcbiAgICB0aGlzLnVzZXJQcm9maWxlID0gdXNlclByb2ZpbGU7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjb25uZWN0KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ29ubmVjdCB0byBTb2NrZXQuaW8gc2VydmVyXHJcbiAgICAgIHRoaXMuc29ja2V0ID0gaW8oU09DS0VUX1NFUlZFUl9VUkwsIHtcclxuICAgICAgICB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICdwb2xsaW5nJ10sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gV2FpdCBmb3IgY29ubmVjdGlvblxyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ29ubmVjdGlvbiB0aW1lb3V0JykpO1xyXG4gICAgICAgIH0sIDEwMDAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5zb2NrZXQhLm9uKCdjb25uZWN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tOZXR3b3JrTWFuYWdlcl0gQ29ubmVjdGVkIHRvIHNlcnZlcicpO1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNvY2tldCEub24oJ2Nvbm5lY3RfZXJyb3InLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbTmV0d29ya01hbmFnZXJdIENvbm5lY3Rpb24gZXJyb3I6JywgZXJyKTtcclxuICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEpvaW4gdGhlIHJvb21cclxuICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnam9pblJvb20nLCB7XHJcbiAgICAgICAgcm9vbUlkOiB0aGlzLnJvb21JZCxcclxuICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxyXG4gICAgICAgIHVzZXJOYW1lOiB0aGlzLnVzZXJOYW1lLFxyXG4gICAgICAgIHVzZXJJbWFnZTogdGhpcy51c2VySW1hZ2UsXHJcbiAgICAgICAgdXNlclByb2ZpbGU6IHRoaXMudXNlclByb2ZpbGUsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gSGFuZGxlIGpvaW5lZCByb29tIChnZXQgZXhpc3RpbmcgcGxheWVycylcclxuICAgICAgLy8gSGFuZGxlIGpvaW5lZCByb29tIChnZXQgZXhpc3RpbmcgcGxheWVycylcclxuICAgICAgdGhpcy5zb2NrZXQub24oJ2pvaW5lZFJvb20nLCAoZGF0YTogeyBwbGF5ZXJzOiBQbGF5ZXJEYXRhW10sIG15UHJvZmlsZT86IFByb2ZpbGVEYXRhIH0pID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW05ldHdvcmtNYW5hZ2VyXSBKb2luZWQgcm9vbSB3aXRoICR7ZGF0YS5wbGF5ZXJzLmxlbmd0aH0gZXhpc3RpbmcgcGxheWVyc2ApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSBvd24gcHJvZmlsZSBpZiBzZXJ2ZXIgc2VudCBvbmUgKGl0J3MgdGhlIHNvdXJjZSBvZiB0cnV0aClcclxuICAgICAgICBpZiAoZGF0YS5teVByb2ZpbGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbTmV0d29ya01hbmFnZXJdIFJlY2VpdmVkIGF1dGhvcml0YXRpdmUgcHJvZmlsZSBmcm9tIHNlcnZlcicsIGRhdGEubXlQcm9maWxlKTtcclxuICAgICAgICAgIHRoaXMudXNlclByb2ZpbGUgPSBkYXRhLm15UHJvZmlsZTtcclxuICAgICAgICAgIHRoaXMudXNlck5hbWUgPSBkYXRhLm15UHJvZmlsZS51c2VybmFtZTtcclxuICAgICAgICAgIHRoaXMubm90aWZ5SGFuZGxlcnMoe1xyXG4gICAgICAgICAgICB0eXBlOiAnc2VsZi1wcm9maWxlLXVwZGF0ZScsXHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEubXlQcm9maWxlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEucGxheWVycy5mb3JFYWNoKChwbGF5ZXIpID0+IHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5SGFuZGxlcnMoe1xyXG4gICAgICAgICAgICB0eXBlOiAncGxheWVyLWpvaW4nLFxyXG4gICAgICAgICAgICBkYXRhOiBwbGF5ZXIsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBIYW5kbGUgbmV3IHBsYXllciBqb2luaW5nXHJcbiAgICAgIHRoaXMuc29ja2V0Lm9uKCdwbGF5ZXJKb2luZWQnLCAocGxheWVyOiBQbGF5ZXJEYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtOZXR3b3JrTWFuYWdlcl0gUGxheWVyIGpvaW5lZDogJHtwbGF5ZXIubmFtZX1gKTtcclxuICAgICAgICB0aGlzLm5vdGlmeUhhbmRsZXJzKHtcclxuICAgICAgICAgIHR5cGU6ICdwbGF5ZXItam9pbicsXHJcbiAgICAgICAgICBkYXRhOiBwbGF5ZXIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gSGFuZGxlIHBsYXllciBtb3ZlbWVudFxyXG4gICAgICB0aGlzLnNvY2tldC5vbigncGxheWVyTW92ZWQnLCAoZGF0YTogUGxheWVyRGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMubm90aWZ5SGFuZGxlcnMoe1xyXG4gICAgICAgICAgdHlwZTogJ3BsYXllci11cGRhdGUnLFxyXG4gICAgICAgICAgZGF0YSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBIYW5kbGUgcHJvZmlsZSB1cGRhdGVzXHJcbiAgICAgIHRoaXMuc29ja2V0Lm9uKCdwbGF5ZXJQcm9maWxlVXBkYXRlZCcsIChkYXRhOiB7IGlkOiBzdHJpbmcsIHByb2ZpbGU6IFByb2ZpbGVEYXRhLCBuYW1lOiBzdHJpbmcgfSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbTmV0d29ya01hbmFnZXJdIFBsYXllciAke2RhdGEubmFtZX0gdXBkYXRlZCBwcm9maWxlYCk7XHJcbiAgICAgICAgLy8gV2Ugc3ludGhlc2l6ZSBhIHBsYXllci11cGRhdGUgbWVzc2FnZSB3aXRoIHRoZSBuZXcgcHJvZmlsZVxyXG4gICAgICAgIHRoaXMubm90aWZ5SGFuZGxlcnMoe1xyXG4gICAgICAgICAgdHlwZTogJ3BsYXllci11cGRhdGUnLFxyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBpZDogZGF0YS5pZCxcclxuICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICB4OiAwLCAvLyBUaGVzZSB3aWxsIGJlIGlnbm9yZWQgb3IgbWVyZ2VkIGJ5IEdhbWVTY2VuZSBsb2dpYyBpZiB3ZWxsIGhhbmRsZWQsIFxyXG4gICAgICAgICAgICAgICAgICAvLyBidXQgd2Ugc2hvdWxkIGlkZWFsbHkganVzdCB0cmlnZ2VyIHByb2ZpbGUgdXBkYXRlLlxyXG4gICAgICAgICAgICAgICAgICAvLyBGb3Igbm93IHJldXNpbmcgcGxheWVyLXVwZGF0ZSBpcyBlYXNpZXN0IGlmIEdhbWVTY2VuZSBoYW5kbGVzIGl0LlxyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdkb3duJyxcclxuICAgICAgICAgICAgaXNNb3Zpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBwcm9maWxlOiBkYXRhLnByb2ZpbGVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBIYW5kbGUgcGxheWVyIGxlYXZpbmdcclxuICAgICAgdGhpcy5zb2NrZXQub24oJ3BsYXllckxlZnQnLCAoZGF0YTogeyBpZDogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW05ldHdvcmtNYW5hZ2VyXSBQbGF5ZXIgbGVmdDogJHtkYXRhLmlkfWApO1xyXG4gICAgICAgIHRoaXMubm90aWZ5SGFuZGxlcnMoe1xyXG4gICAgICAgICAgdHlwZTogJ3BsYXllci1sZWF2ZScsXHJcbiAgICAgICAgICBkYXRhLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEhhbmRsZSBlcnJvcnNcclxuICAgICAgdGhpcy5zb2NrZXQub24oJ2Vycm9yJywgKGVycjogeyBtZXNzYWdlOiBzdHJpbmcgfSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tOZXR3b3JrTWFuYWdlcl0gRXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbTmV0d29ya01hbmFnZXJdIEpvaW5lZCByb29tOiAke3RoaXMucm9vbUlkfSBhcyAke3RoaXMudXNlck5hbWV9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTmV0d29ya01hbmFnZXJdIEZhaWxlZCB0byBjb25uZWN0OicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNjb25uZWN0KCkge1xyXG4gICAgaWYgKHRoaXMuc29ja2V0KSB7XHJcbiAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5zb2NrZXQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coYFtOZXR3b3JrTWFuYWdlcl0gRGlzY29ubmVjdGVkIGZyb20gcm9vbTogJHt0aGlzLnJvb21JZH1gKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGUocHJvZmlsZTogUHJvZmlsZURhdGEpIHtcclxuICAgIHRoaXMudXNlclByb2ZpbGUgPSBwcm9maWxlO1xyXG4gICAgdGhpcy51c2VyTmFtZSA9IHByb2ZpbGUudXNlcm5hbWU7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLnNvY2tldD8uY29ubmVjdGVkKSB7XHJcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ3VwZGF0ZVByb2ZpbGUnLCBwcm9maWxlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTWVzc2FnZShoYW5kbGVyOiBNZXNzYWdlSGFuZGxlcikge1xyXG4gICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm90aWZ5SGFuZGxlcnMobWVzc2FnZTogTXVsdGlwbGF5ZXJNZXNzYWdlKSB7XHJcbiAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5mb3JFYWNoKChoYW5kbGVyKSA9PiBoYW5kbGVyKG1lc3NhZ2UpKTtcclxuICB9XHJcblxyXG4gIGJyb2FkY2FzdFBsYXllclVwZGF0ZShwbGF5ZXJEYXRhOiBPbWl0PFBsYXllckRhdGEsICdpZCcgfCAnbmFtZScgfCAnaW1hZ2UnPikge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGlmIChub3cgLSB0aGlzLmxhc3RCcm9hZGNhc3RUaW1lIDwgdGhpcy5icm9hZGNhc3RJbnRlcnZhbCkge1xyXG4gICAgICByZXR1cm47IC8vIFRocm90dGxlIHVwZGF0ZXNcclxuICAgIH1cclxuICAgIHRoaXMubGFzdEJyb2FkY2FzdFRpbWUgPSBub3c7XHJcblxyXG4gICAgaWYgKHRoaXMuc29ja2V0Py5jb25uZWN0ZWQpIHtcclxuICAgICAgdGhpcy5zb2NrZXQuZW1pdCgnbW92ZScsIHtcclxuICAgICAgICB4OiBwbGF5ZXJEYXRhLngsXHJcbiAgICAgICAgeTogcGxheWVyRGF0YS55LFxyXG4gICAgICAgIGRpcmVjdGlvbjogcGxheWVyRGF0YS5kaXJlY3Rpb24sXHJcbiAgICAgICAgaXNNb3Zpbmc6IHBsYXllckRhdGEuaXNNb3ZpbmcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYnJvYWRjYXN0T2JqZWN0SW50ZXJhY3Rpb24ob2JqZWN0SWQ6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcpIHtcclxuICAgIGlmICh0aGlzLnNvY2tldD8uY29ubmVjdGVkKSB7XHJcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ2ludGVyYWN0JywgeyBvYmplY3RJZCwgYWN0aW9uIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudXNlcklkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlck5hbWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy51c2VyTmFtZTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImlvIiwiU09DS0VUX1NFUlZFUl9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU09DS0VUX1VSTCIsIk5ldHdvcmtNYW5hZ2VyIiwicm9vbUlkIiwidXNlcklkIiwidXNlck5hbWUiLCJ1c2VySW1hZ2UiLCJ1c2VyUHJvZmlsZSIsInNvY2tldCIsIm1lc3NhZ2VIYW5kbGVycyIsImxhc3RCcm9hZGNhc3RUaW1lIiwiYnJvYWRjYXN0SW50ZXJ2YWwiLCJjb25uZWN0IiwidHJhbnNwb3J0cyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidGltZW91dCIsInNldFRpbWVvdXQiLCJFcnJvciIsIm9uIiwiY2xlYXJUaW1lb3V0IiwiY29uc29sZSIsImxvZyIsImVyciIsImVycm9yIiwiZW1pdCIsImRhdGEiLCJwbGF5ZXJzIiwibGVuZ3RoIiwibXlQcm9maWxlIiwidXNlcm5hbWUiLCJub3RpZnlIYW5kbGVycyIsInR5cGUiLCJmb3JFYWNoIiwicGxheWVyIiwibmFtZSIsImlkIiwieCIsInkiLCJkaXJlY3Rpb24iLCJpc01vdmluZyIsInByb2ZpbGUiLCJtZXNzYWdlIiwiZGlzY29ubmVjdCIsInVwZGF0ZVByb2ZpbGUiLCJjb25uZWN0ZWQiLCJvbk1lc3NhZ2UiLCJoYW5kbGVyIiwicHVzaCIsImJyb2FkY2FzdFBsYXllclVwZGF0ZSIsInBsYXllckRhdGEiLCJub3ciLCJEYXRlIiwiYnJvYWRjYXN0T2JqZWN0SW50ZXJhY3Rpb24iLCJvYmplY3RJZCIsImFjdGlvbiIsImdldFVzZXJJZCIsImdldFVzZXJOYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./game/multiplayer/NetworkManager.ts\n");

/***/ }),

/***/ "(ssr)/./game/scenes/GameScene.ts":
/*!**********************************!*\
  !*** ./game/scenes/GameScene.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GameScene)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"(ssr)/./node_modules/.pnpm/phaser@3.90.0/node_modules/phaser/dist/phaser.esm.js\");\n/* harmony import */ var _entities_Player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entities/Player */ \"(ssr)/./game/entities/Player.ts\");\n/* harmony import */ var _entities_RemotePlayer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entities/RemotePlayer */ \"(ssr)/./game/entities/RemotePlayer.ts\");\n/* harmony import */ var _multiplayer_NetworkManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../multiplayer/NetworkManager */ \"(ssr)/./game/multiplayer/NetworkManager.ts\");\n\n\n\n\nclass GameScene extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super({\n            key: 'GameScene'\n        }), this.remotePlayers = new Map();\n        this.worldWidth = 1600;\n        this.worldHeight = 1200;\n        this.currentZoom = 2.5; // Default 250%\n        this.minZoom = 1.0;\n        this.maxZoom = 3.0;\n    }\n    create() {\n        // Get multiplayer data from registry\n        const roomId = this.registry.get('roomId') || 'default';\n        const userId = this.registry.get('userId') || `guest-${Date.now()}`;\n        const userName = this.registry.get('userName') || 'Guest';\n        const userImage = this.registry.get('userImage');\n        const userProfile = this.registry.get('userProfile');\n        // Initialize network manager\n        this.networkManager = new _multiplayer_NetworkManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"](roomId, userId, userName, userImage, userProfile);\n        // Watch for profile updates from UI\n        this.events.on('update', ()=>{\n            const win = window;\n            if (win.getMyProfile) {\n                const currentProfile = win.getMyProfile();\n            // If username changed or something else, we might trigger update\n            // Ideally GameClient calls a function on window that we hook into\n            }\n        });\n        // Instead of polling, let's expose a function for GameClient to call\n        window.updateGameProfile = (profile)=>{\n            this.networkManager.updateProfile(profile);\n            if (this.player) {\n            // Update local player name if needed? \n            // Player class doesn't show name tag but we might want to\n            }\n        };\n        // Connect async (don't block scene creation)\n        this.networkManager.connect().catch((err)=>{\n            console.error('[GameScene] Network connection failed:', err);\n        });\n        // Listen for multiplayer messages\n        this.networkManager.onMessage((message)=>{\n            this.handleNetworkMessage(message);\n        });\n        // Set world bounds\n        this.physics.world.setBounds(0, 0, this.worldWidth, this.worldHeight);\n        // Create tilemap programmatically\n        this.createTileMap(this.worldWidth, this.worldHeight);\n        // Create decorative objects\n        this.createDecorations();\n        // Create player with random spawn offset to prevent overlap\n        const spawnOffsetX = Math.floor(Math.random() * 200) - 100; // -100 to +100\n        const spawnOffsetY = Math.floor(Math.random() * 200) - 100;\n        this.player = new _entities_Player__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this, 800 + spawnOffsetX, 600 + spawnOffsetY);\n        // Add collision between player and obstacles\n        this.physics.add.collider(this.player.sprite, this.obstacles);\n        // Setup main camera\n        this.cameras.main.setBounds(0, 0, this.worldWidth, this.worldHeight);\n        this.cameras.main.startFollow(this.player.sprite, true, 0.1, 0.1);\n        this.cameras.main.setZoom(this.currentZoom);\n        // Add ambient particles (floating leaves)\n        this.createAmbientParticles();\n        // Create minimap\n        this.createMinimap();\n        // Create zoom controls\n        this.createZoomControls();\n        // Setup keyboard zoom controls\n        this.setupZoomKeys();\n        // Emit game-started event to notify UI (GameClient)\n        this.game.events.emit('game-started');\n        // Clean up on scene shutdown\n        this.events.on('shutdown', ()=>{\n            this.networkManager.disconnect();\n        });\n    }\n    handleNetworkMessage(message) {\n        switch(message.type){\n            case 'player-join':\n                this.addRemotePlayer(message.data);\n                break;\n            case 'player-leave':\n                this.removeRemotePlayer(message.data.id);\n                break;\n            case 'player-update':\n                this.updateRemotePlayer(message.data);\n                break;\n            case 'object-interaction':\n                // Handle shared object interactions\n                console.log(`Player ${message.data.playerId} interacted with ${message.data.objectId}`);\n                break;\n            case 'self-profile-update':\n                console.log('[GameScene] Updating local profile from server');\n                const win = window;\n                if (win.updateMyProfileFromGame) {\n                    win.updateMyProfileFromGame(message.data);\n                }\n                break;\n        }\n    }\n    addRemotePlayer(data) {\n        if (data.id === this.networkManager.getUserId()) return;\n        if (this.remotePlayers.has(data.id)) return;\n        const remotePlayer = new _entities_RemotePlayer__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this, data);\n        this.remotePlayers.set(data.id, remotePlayer);\n        // Add collision between local player and remote player\n        this.physics.add.collider(this.player.sprite, remotePlayer.getSprite());\n        // Update player count in UI (1 = self + remotePlayers count)\n        this.updatePlayerCountUI();\n        console.log(`[GameScene] Player joined: ${data.name}`);\n    }\n    removeRemotePlayer(id) {\n        const remotePlayer = this.remotePlayers.get(id);\n        if (remotePlayer) {\n            remotePlayer.destroy();\n            this.remotePlayers.delete(id);\n            // Update player count in UI\n            this.updatePlayerCountUI();\n            console.log(`[GameScene] Player left: ${id}`);\n        }\n    }\n    updateRemotePlayer(data) {\n        if (data.id === this.networkManager.getUserId()) return;\n        let remotePlayer = this.remotePlayers.get(data.id);\n        if (!remotePlayer) {\n            // Player not found, add them\n            remotePlayer = new _entities_RemotePlayer__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this, data);\n            this.remotePlayers.set(data.id, remotePlayer);\n            // Add collision between local player and remote player\n            this.physics.add.collider(this.player.sprite, remotePlayer.getSprite());\n            // Update player count\n            this.updatePlayerCountUI();\n        } else {\n            remotePlayer.updateFromNetwork(data);\n        }\n    }\n    updatePlayerCountUI() {\n        // Count = 1 (self) + number of remote players\n        const totalPlayers = 1 + this.remotePlayers.size;\n        // Call the global updatePlayerCount function if it exists\n        const win = window;\n        if (win.updatePlayerCount) {\n            win.updatePlayerCount(totalPlayers);\n        }\n    }\n    createMinimap() {\n        // Minimap dimensions - smaller on mobile\n        const isMobile = window.innerWidth < 768;\n        const minimapWidth = isMobile ? 100 : 180;\n        const minimapHeight = isMobile ? 75 : 135;\n        const padding = 16;\n        // Get actual viewport width\n        const viewportWidth = window.innerWidth;\n        // Create minimap camera\n        this.minimapCamera = this.cameras.add(viewportWidth - minimapWidth - padding, padding, minimapWidth, minimapHeight);\n        // Configure minimap\n        this.minimapCamera.setBounds(0, 0, this.worldWidth, this.worldHeight);\n        this.minimapCamera.setZoom(minimapWidth / this.worldWidth);\n        this.minimapCamera.setBackgroundColor(0x1a1a2e);\n        this.minimapCamera.startFollow(this.player.sprite);\n        this.minimapCamera.setName('minimap');\n        // Create minimap border using HTML\n        const gameContainer = document.getElementById('game-container');\n        if (!gameContainer) return;\n        const minimapContainer = document.createElement('div');\n        minimapContainer.id = 'minimap-border';\n        minimapContainer.style.cssText = `\n      position: absolute;\n      top: ${padding - 2}px;\n      right: ${padding - 2}px;\n      width: ${minimapWidth + 4}px;\n      height: ${minimapHeight + 4}px;\n      border: 3px solid #5a5a3a;\n      border-radius: 4px;\n      pointer-events: none;\n      z-index: 999;\n    `;\n        gameContainer.appendChild(minimapContainer);\n        // Store for resize handling\n        this.minimapWidth = minimapWidth;\n        this.minimapHeight = minimapHeight;\n        this.minimapPadding = padding;\n    }\n    createZoomControls() {\n        const gameContainer = document.getElementById('game-container');\n        if (!gameContainer) return;\n        const container = document.createElement('div');\n        container.id = 'zoom-controls';\n        container.style.cssText = `\n      position: absolute;\n      top: 60px;\n      left: 16px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n      z-index: 1000;\n      font-family: Arial, sans-serif;\n    `;\n        // Zoom in button\n        const zoomInBtn = document.createElement('button');\n        zoomInBtn.textContent = '+';\n        zoomInBtn.style.cssText = `\n      width: 44px;\n      height: 44px;\n      font-size: 24px;\n      font-weight: bold;\n      background: rgba(255, 255, 255, 0.9);\n      border: 2px solid #5a5a3a;\n      border-radius: 8px;\n      color: #5a5a3a;\n      cursor: pointer;\n      transition: all 0.2s;\n    `;\n        zoomInBtn.addEventListener('click', ()=>this.zoomIn());\n        zoomInBtn.addEventListener('mouseenter', ()=>zoomInBtn.style.background = '#e8e8e0');\n        zoomInBtn.addEventListener('mouseleave', ()=>zoomInBtn.style.background = 'rgba(255, 255, 255, 0.9)');\n        // Zoom out button\n        const zoomOutBtn = document.createElement('button');\n        zoomOutBtn.textContent = '';\n        zoomOutBtn.style.cssText = `\n      width: 44px;\n      height: 44px;\n      font-size: 24px;\n      font-weight: bold;\n      background: rgba(255, 255, 255, 0.9);\n      border: 2px solid #5a5a3a;\n      border-radius: 8px;\n      color: #5a5a3a;\n      cursor: pointer;\n      transition: all 0.2s;\n    `;\n        zoomOutBtn.addEventListener('click', ()=>this.zoomOut());\n        zoomOutBtn.addEventListener('mouseenter', ()=>zoomOutBtn.style.background = '#e8e8e0');\n        zoomOutBtn.addEventListener('mouseleave', ()=>zoomOutBtn.style.background = 'rgba(255, 255, 255, 0.9)');\n        // Zoom percentage display\n        this.zoomDisplay = document.createElement('div');\n        this.zoomDisplay.style.cssText = `\n      text-align: center;\n      font-size: 12px;\n      color: #5a5a3a;\n      background: rgba(255, 255, 255, 0.8);\n      padding: 4px 8px;\n      border-radius: 4px;\n    `;\n        this.zoomDisplay.textContent = `${Math.round(this.currentZoom * 100)}%`;\n        container.appendChild(zoomInBtn);\n        container.appendChild(zoomOutBtn);\n        container.appendChild(this.zoomDisplay);\n        gameContainer.appendChild(container);\n    }\n    setupZoomKeys() {\n        // Q to zoom out, E to zoom in\n        this.input.keyboard.on('keydown-Q', ()=>this.zoomOut());\n        this.input.keyboard.on('keydown-E', ()=>this.zoomIn());\n        // Mouse wheel zoom\n        this.input.on('wheel', (_pointer, _gameObjects, _deltaX, deltaY)=>{\n            if (deltaY > 0) {\n                this.zoomOut();\n            } else if (deltaY < 0) {\n                this.zoomIn();\n            }\n        });\n    }\n    zoomIn() {\n        this.currentZoom = Math.min(this.currentZoom + 0.25, this.maxZoom);\n        this.cameras.main.setZoom(this.currentZoom);\n        this.updateZoomText();\n    }\n    zoomOut() {\n        this.currentZoom = Math.max(this.currentZoom - 0.25, this.minZoom);\n        this.cameras.main.setZoom(this.currentZoom);\n        this.updateZoomText();\n    }\n    updateZoomText() {\n        if (this.zoomDisplay) {\n            this.zoomDisplay.textContent = `${Math.round(this.currentZoom * 100)}%`;\n        }\n    }\n    createTileMap(width, height) {\n        const tileSize = 32;\n        const cols = Math.ceil(width / tileSize);\n        const rows = Math.ceil(height / tileSize);\n        // Create a graphics object for the ground\n        const groundLayer = this.add.graphics();\n        // Draw base ground - soft mint/sky blue theme\n        for(let y = 0; y < rows; y++){\n            for(let x = 0; x < cols; x++){\n                const px = x * tileSize;\n                const py = y * tileSize;\n                // Vary ground color slightly\n                const noise = Math.sin(x * 0.3) * Math.cos(y * 0.3);\n                if (noise > 0.5) {\n                    groundLayer.fillStyle(0x98d4bb);\n                } else if (noise < -0.3) {\n                    groundLayer.fillStyle(0xc5e8d5);\n                } else {\n                    groundLayer.fillStyle(0xb0dfc6);\n                }\n                groundLayer.fillRect(px, py, tileSize, tileSize);\n                // Add some ground detail\n                if (Math.random() > 0.85) {\n                    groundLayer.fillStyle(0xffffff);\n                    groundLayer.fillRect(px + Math.random() * 24 + 4, py + Math.random() * 24 + 4, 3, 3);\n                }\n            }\n        }\n        // Create paths\n        this.createPaths(groundLayer, tileSize, width, height);\n    }\n    createPaths(graphics, tileSize, width, height) {\n        // Main horizontal path\n        const pathY = Math.floor(height / 2 / tileSize) * tileSize;\n        for(let x = 0; x < width; x += tileSize){\n            graphics.fillStyle(0xf0e6ff);\n            graphics.fillRect(x, pathY - tileSize, tileSize, tileSize * 3);\n            // Path texture\n            graphics.fillStyle(0xe0d4f0);\n            if (Math.random() > 0.7) {\n                graphics.fillRect(x + 8, pathY - tileSize + 8, 6, 6);\n            }\n        }\n        // Vertical path\n        const pathX = Math.floor(width / 2 / tileSize) * tileSize;\n        for(let y = 0; y < height; y += tileSize){\n            graphics.fillStyle(0xf0e6ff);\n            graphics.fillRect(pathX - tileSize, y, tileSize * 3, tileSize);\n        }\n    }\n    createDecorations() {\n        // Create obstacles group for collision\n        this.obstacles = this.physics.add.staticGroup();\n        // Trees group for depth sorting\n        this.decorations = this.add.group();\n        // Path bounds for avoiding flower placement\n        const pathY = this.worldHeight / 2;\n        const pathX = this.worldWidth / 2;\n        const pathWidth = 96;\n        // Helper to check if position is on a path\n        const isOnPath = (x, y)=>{\n            const onHorizontalPath = Math.abs(y - pathY) < pathWidth;\n            const onVerticalPath = Math.abs(x - pathX) < pathWidth;\n            return onHorizontalPath || onVerticalPath;\n        };\n        // Place trees around the map\n        const treePositions = [\n            {\n                x: 200,\n                y: 150\n            },\n            {\n                x: 350,\n                y: 200\n            },\n            {\n                x: 150,\n                y: 350\n            },\n            {\n                x: 450,\n                y: 180\n            },\n            {\n                x: 280,\n                y: 450\n            },\n            {\n                x: 520,\n                y: 350\n            },\n            {\n                x: 180,\n                y: 700\n            },\n            {\n                x: 400,\n                y: 750\n            },\n            {\n                x: 600,\n                y: 680\n            },\n            {\n                x: 1000,\n                y: 200\n            },\n            {\n                x: 1150,\n                y: 350\n            },\n            {\n                x: 1300,\n                y: 180\n            },\n            {\n                x: 1100,\n                y: 500\n            },\n            {\n                x: 1350,\n                y: 650\n            },\n            {\n                x: 1200,\n                y: 800\n            },\n            {\n                x: 250,\n                y: 950\n            },\n            {\n                x: 450,\n                y: 1050\n            },\n            {\n                x: 700,\n                y: 900\n            },\n            {\n                x: 950,\n                y: 1000\n            },\n            {\n                x: 1150,\n                y: 950\n            },\n            {\n                x: 1400,\n                y: 1050\n            }\n        ];\n        treePositions.forEach((pos)=>{\n            const tree = this.add.image(pos.x, pos.y, 'tree');\n            tree.setOrigin(0.5, 1);\n            tree.setDepth(pos.y);\n            this.decorations.add(tree);\n            // Add collision body for tree trunk\n            const treeCollider = this.add.rectangle(pos.x, pos.y - 15, 24, 30);\n            this.physics.add.existing(treeCollider, true);\n            this.obstacles.add(treeCollider);\n            // Add subtle animation\n            this.tweens.add({\n                targets: tree,\n                scaleX: 1.02,\n                scaleY: 0.98,\n                duration: 2000 + Math.random() * 1000,\n                yoyo: true,\n                repeat: -1,\n                ease: 'Sine.easeInOut'\n            });\n        });\n        // Place building (coffee shop)\n        const building = this.add.image(1400, 350, 'building');\n        building.setOrigin(0.5, 1);\n        building.setDepth(350);\n        building.setScale(1.5);\n        this.decorations.add(building);\n        // Add collision for building\n        const buildingCollider = this.add.rectangle(1400, 300, 150, 100);\n        this.physics.add.existing(buildingCollider, true);\n        this.obstacles.add(buildingCollider);\n        // Place benches\n        const benchPositions = [\n            {\n                x: 700,\n                y: 550\n            },\n            {\n                x: 900,\n                y: 550\n            },\n            {\n                x: 700,\n                y: 680\n            },\n            {\n                x: 900,\n                y: 680\n            }\n        ];\n        benchPositions.forEach((pos)=>{\n            const bench = this.add.image(pos.x, pos.y, 'bench');\n            bench.setOrigin(0.5, 1);\n            bench.setDepth(pos.y);\n            this.decorations.add(bench);\n            // Add collision for bench\n            const benchCollider = this.add.rectangle(pos.x, pos.y - 10, 44, 20);\n            this.physics.add.existing(benchCollider, true);\n            this.obstacles.add(benchCollider);\n        });\n        // Place bushes\n        const bushPositions = [\n            {\n                x: 100,\n                y: 200\n            },\n            {\n                x: 130,\n                y: 220\n            },\n            {\n                x: 1450,\n                y: 450\n            },\n            {\n                x: 1480,\n                y: 420\n            },\n            {\n                x: 300,\n                y: 800\n            },\n            {\n                x: 330,\n                y: 820\n            },\n            {\n                x: 1200,\n                y: 1100\n            },\n            {\n                x: 1230,\n                y: 1080\n            }\n        ];\n        bushPositions.forEach((pos)=>{\n            const bush = this.add.image(pos.x, pos.y, 'bush');\n            bush.setOrigin(0.5, 1);\n            bush.setDepth(pos.y);\n            this.decorations.add(bush);\n            // Add collision for bush\n            const bushCollider = this.add.rectangle(pos.x, pos.y - 10, 28, 20);\n            this.physics.add.existing(bushCollider, true);\n            this.obstacles.add(bushCollider);\n        });\n        // Place flowers randomly - avoid paths!\n        for(let i = 0; i < 30; i++){\n            let x, y;\n            let attempts = 0;\n            do {\n                x = Math.random() * 1500 + 50;\n                y = Math.random() * 1100 + 50;\n                attempts++;\n            }while (isOnPath(x, y) && attempts < 20);\n            // Skip if still on path after attempts\n            if (isOnPath(x, y)) continue;\n            const flower = this.add.image(x, y, 'flower');\n            flower.setOrigin(0.5, 1);\n            flower.setDepth(y);\n            // Gentle sway animation\n            this.tweens.add({\n                targets: flower,\n                angle: {\n                    from: -5,\n                    to: 5\n                },\n                duration: 1500 + Math.random() * 500,\n                yoyo: true,\n                repeat: -1,\n                ease: 'Sine.easeInOut'\n            });\n        }\n    }\n    createAmbientParticles() {\n        // Create simple leaf particles using graphics\n        const leafGraphics = this.add.graphics();\n        leafGraphics.fillStyle(0xdaa520, 0.6);\n        leafGraphics.fillRect(0, 0, 4, 4);\n        leafGraphics.generateTexture('leaf', 4, 4);\n        leafGraphics.destroy();\n        // Emit leaves across the visible area\n        const particles = this.add.particles(0, 0, 'leaf', {\n            x: {\n                min: 0,\n                max: 1600\n            },\n            y: -10,\n            lifespan: 8000,\n            speedX: {\n                min: -20,\n                max: 20\n            },\n            speedY: {\n                min: 20,\n                max: 40\n            },\n            angle: {\n                min: 0,\n                max: 360\n            },\n            rotate: {\n                min: 0,\n                max: 360\n            },\n            scale: {\n                start: 1,\n                end: 0.5\n            },\n            alpha: {\n                start: 0.7,\n                end: 0\n            },\n            frequency: 500,\n            quantity: 1\n        });\n        particles.setDepth(999);\n    }\n    update() {\n        if (this.player) {\n            // Update player and get current state\n            const playerState = this.player.update();\n            // Update sprite depth based on Y position\n            this.player.sprite.setDepth(this.player.sprite.y);\n            // Broadcast player position to network\n            this.networkManager.broadcastPlayerUpdate(playerState);\n        }\n        // Update all remote players\n        this.remotePlayers.forEach((remotePlayer)=>{\n            remotePlayer.update();\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SztnQkFBR0UsS0FBSztZQUFJO1lBQzNCcUUsT0FBTztnQkFBRUMsT0FBTztnQkFBR0MsS0FBSztZQUFJO1lBQzVCQyxPQUFPO2dCQUFFRixPQUFPO2dCQUFLQyxLQUFLO1lBQUU7WUFDNUJFLFdBQVc7WUFDWEMsVUFBVTtRQUNaO1FBQ0FWLFVBQVU3QixRQUFRLENBQUM7SUFDckI7SUFFQXdDLFNBQVM7UUFDUCxJQUFJLElBQUksQ0FBQ3hLLE1BQU0sRUFBRTtZQUNmLHNDQUFzQztZQUN0QyxNQUFNeUssY0FBYyxJQUFJLENBQUN6SyxNQUFNLENBQUN3SyxNQUFNO1lBRXRDLDBDQUEwQztZQUMxQyxJQUFJLENBQUN4SyxNQUFNLENBQUNxQixNQUFNLENBQUMyRyxRQUFRLENBQUMsSUFBSSxDQUFDaEksTUFBTSxDQUFDcUIsTUFBTSxDQUFDaUYsQ0FBQztZQUVoRCx1Q0FBdUM7WUFDdkMsSUFBSSxDQUFDaEgsY0FBYyxDQUFDb0wscUJBQXFCLENBQUNEO1FBQzVDO1FBRUEsNEJBQTRCO1FBQzVCLElBQUksQ0FBQ3BNLGFBQWEsQ0FBQ3NKLE9BQU8sQ0FBQyxDQUFDN0U7WUFDMUJBLGFBQWEwSCxNQUFNO1FBQ3JCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRDpcXHByb2plY3RcXEdhbWluZyBQcm9qZWN0XFxDbG91ZFRvd25cXGNsaWVudFxcZ2FtZVxcc2NlbmVzXFxHYW1lU2NlbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi4vZW50aXRpZXMvUGxheWVyJztcclxuaW1wb3J0IFJlbW90ZVBsYXllciBmcm9tICcuLi9lbnRpdGllcy9SZW1vdGVQbGF5ZXInO1xyXG5pbXBvcnQgTmV0d29ya01hbmFnZXIgZnJvbSAnLi4vbXVsdGlwbGF5ZXIvTmV0d29ya01hbmFnZXInO1xyXG5pbXBvcnQgdHlwZSB7IE11bHRpcGxheWVyTWVzc2FnZSwgUGxheWVyRGF0YSB9IGZyb20gJy4uL211bHRpcGxheWVyL3R5cGVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgd29ybGRXaWR0aDogbnVtYmVyO1xyXG4gIHdvcmxkSGVpZ2h0OiBudW1iZXI7XHJcbiAgY3VycmVudFpvb206IG51bWJlcjtcclxuICBtaW5ab29tOiBudW1iZXI7XHJcbiAgbWF4Wm9vbTogbnVtYmVyO1xyXG4gIHBsYXllciE6IFBsYXllcjtcclxuICBvYnN0YWNsZXMhOiBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuU3RhdGljR3JvdXA7XHJcbiAgZGVjb3JhdGlvbnMhOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JvdXA7XHJcbiAgbWluaW1hcENhbWVyYSE6IFBoYXNlci5DYW1lcmFzLlNjZW5lMkQuQ2FtZXJhO1xyXG4gIHpvb21EaXNwbGF5PzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgbWluaW1hcFdpZHRoITogbnVtYmVyO1xyXG4gIG1pbmltYXBIZWlnaHQhOiBudW1iZXI7XHJcbiAgbWluaW1hcFBhZGRpbmchOiBudW1iZXI7XHJcblxyXG4gIC8vIE11bHRpcGxheWVyXHJcbiAgbmV0d29ya01hbmFnZXIhOiBOZXR3b3JrTWFuYWdlcjtcclxuICByZW1vdGVQbGF5ZXJzOiBNYXA8c3RyaW5nLCBSZW1vdGVQbGF5ZXI+ID0gbmV3IE1hcCgpO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKHsga2V5OiAnR2FtZVNjZW5lJyB9KTtcclxuICAgIHRoaXMud29ybGRXaWR0aCA9IDE2MDA7XHJcbiAgICB0aGlzLndvcmxkSGVpZ2h0ID0gMTIwMDtcclxuICAgIHRoaXMuY3VycmVudFpvb20gPSAyLjU7IC8vIERlZmF1bHQgMjUwJVxyXG4gICAgdGhpcy5taW5ab29tID0gMS4wO1xyXG4gICAgdGhpcy5tYXhab29tID0gMy4wO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlKCkge1xyXG4gICAgLy8gR2V0IG11bHRpcGxheWVyIGRhdGEgZnJvbSByZWdpc3RyeVxyXG4gICAgY29uc3Qgcm9vbUlkID0gdGhpcy5yZWdpc3RyeS5nZXQoJ3Jvb21JZCcpIHx8ICdkZWZhdWx0JztcclxuICAgIGNvbnN0IHVzZXJJZCA9IHRoaXMucmVnaXN0cnkuZ2V0KCd1c2VySWQnKSB8fCBgZ3Vlc3QtJHtEYXRlLm5vdygpfWA7XHJcbiAgICBjb25zdCB1c2VyTmFtZSA9IHRoaXMucmVnaXN0cnkuZ2V0KCd1c2VyTmFtZScpIHx8ICdHdWVzdCc7XHJcbiAgICBjb25zdCB1c2VySW1hZ2UgPSB0aGlzLnJlZ2lzdHJ5LmdldCgndXNlckltYWdlJyk7XHJcbiAgICBjb25zdCB1c2VyUHJvZmlsZSA9IHRoaXMucmVnaXN0cnkuZ2V0KCd1c2VyUHJvZmlsZScpO1xyXG5cclxuICAgIC8vIEluaXRpYWxpemUgbmV0d29yayBtYW5hZ2VyXHJcbiAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyID0gbmV3IE5ldHdvcmtNYW5hZ2VyKHJvb21JZCwgdXNlcklkLCB1c2VyTmFtZSwgdXNlckltYWdlLCB1c2VyUHJvZmlsZSk7XHJcblxyXG4gICAgLy8gV2F0Y2ggZm9yIHByb2ZpbGUgdXBkYXRlcyBmcm9tIFVJXHJcbiAgICB0aGlzLmV2ZW50cy5vbigndXBkYXRlJywgKCkgPT4ge1xyXG4gICAgICAgY29uc3Qgd2luID0gd2luZG93IGFzIHVua25vd24gYXMgeyBnZXRNeVByb2ZpbGU/OiAoKSA9PiBhbnkgfTtcclxuICAgICAgIGlmICh3aW4uZ2V0TXlQcm9maWxlKSB7XHJcbiAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9maWxlID0gd2luLmdldE15UHJvZmlsZSgpO1xyXG4gICAgICAgICAvLyBJZiB1c2VybmFtZSBjaGFuZ2VkIG9yIHNvbWV0aGluZyBlbHNlLCB3ZSBtaWdodCB0cmlnZ2VyIHVwZGF0ZVxyXG4gICAgICAgICAvLyBJZGVhbGx5IEdhbWVDbGllbnQgY2FsbHMgYSBmdW5jdGlvbiBvbiB3aW5kb3cgdGhhdCB3ZSBob29rIGludG9cclxuICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBJbnN0ZWFkIG9mIHBvbGxpbmcsIGxldCdzIGV4cG9zZSBhIGZ1bmN0aW9uIGZvciBHYW1lQ2xpZW50IHRvIGNhbGxcclxuICAgICh3aW5kb3cgYXMgYW55KS51cGRhdGVHYW1lUHJvZmlsZSA9IChwcm9maWxlOiBhbnkpID0+IHtcclxuICAgICAgIHRoaXMubmV0d29ya01hbmFnZXIudXBkYXRlUHJvZmlsZShwcm9maWxlKTtcclxuICAgICAgIGlmICh0aGlzLnBsYXllcikge1xyXG4gICAgICAgICAvLyBVcGRhdGUgbG9jYWwgcGxheWVyIG5hbWUgaWYgbmVlZGVkPyBcclxuICAgICAgICAgLy8gUGxheWVyIGNsYXNzIGRvZXNuJ3Qgc2hvdyBuYW1lIHRhZyBidXQgd2UgbWlnaHQgd2FudCB0b1xyXG4gICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gQ29ubmVjdCBhc3luYyAoZG9uJ3QgYmxvY2sgc2NlbmUgY3JlYXRpb24pXHJcbiAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyLmNvbm5lY3QoKS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHYW1lU2NlbmVdIE5ldHdvcmsgY29ubmVjdGlvbiBmYWlsZWQ6JywgZXJyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgbXVsdGlwbGF5ZXIgbWVzc2FnZXNcclxuICAgIHRoaXMubmV0d29ya01hbmFnZXIub25NZXNzYWdlKChtZXNzYWdlOiBNdWx0aXBsYXllck1lc3NhZ2UpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVOZXR3b3JrTWVzc2FnZShtZXNzYWdlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNldCB3b3JsZCBib3VuZHNcclxuICAgIHRoaXMucGh5c2ljcy53b3JsZC5zZXRCb3VuZHMoMCwgMCwgdGhpcy53b3JsZFdpZHRoLCB0aGlzLndvcmxkSGVpZ2h0KTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIHRpbGVtYXAgcHJvZ3JhbW1hdGljYWxseVxyXG4gICAgdGhpcy5jcmVhdGVUaWxlTWFwKHRoaXMud29ybGRXaWR0aCwgdGhpcy53b3JsZEhlaWdodCk7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBkZWNvcmF0aXZlIG9iamVjdHNcclxuICAgIHRoaXMuY3JlYXRlRGVjb3JhdGlvbnMoKTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIHBsYXllciB3aXRoIHJhbmRvbSBzcGF3biBvZmZzZXQgdG8gcHJldmVudCBvdmVybGFwXHJcbiAgICBjb25zdCBzcGF3bk9mZnNldFggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMDApIC0gMTAwOyAvLyAtMTAwIHRvICsxMDBcclxuICAgIGNvbnN0IHNwYXduT2Zmc2V0WSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwMCkgLSAxMDA7XHJcbiAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIodGhpcywgODAwICsgc3Bhd25PZmZzZXRYLCA2MDAgKyBzcGF3bk9mZnNldFkpO1xyXG4gICAgXHJcbiAgICAvLyBBZGQgY29sbGlzaW9uIGJldHdlZW4gcGxheWVyIGFuZCBvYnN0YWNsZXNcclxuICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5wbGF5ZXIuc3ByaXRlLCB0aGlzLm9ic3RhY2xlcyk7XHJcbiAgICBcclxuICAgIC8vIFNldHVwIG1haW4gY2FtZXJhXHJcbiAgICB0aGlzLmNhbWVyYXMubWFpbi5zZXRCb3VuZHMoMCwgMCwgdGhpcy53b3JsZFdpZHRoLCB0aGlzLndvcmxkSGVpZ2h0KTtcclxuICAgIHRoaXMuY2FtZXJhcy5tYWluLnN0YXJ0Rm9sbG93KHRoaXMucGxheWVyLnNwcml0ZSwgdHJ1ZSwgMC4xLCAwLjEpO1xyXG4gICAgdGhpcy5jYW1lcmFzLm1haW4uc2V0Wm9vbSh0aGlzLmN1cnJlbnRab29tKTtcclxuICAgIFxyXG4gICAgLy8gQWRkIGFtYmllbnQgcGFydGljbGVzIChmbG9hdGluZyBsZWF2ZXMpXHJcbiAgICB0aGlzLmNyZWF0ZUFtYmllbnRQYXJ0aWNsZXMoKTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIG1pbmltYXBcclxuICAgIHRoaXMuY3JlYXRlTWluaW1hcCgpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgem9vbSBjb250cm9sc1xyXG4gICAgdGhpcy5jcmVhdGVab29tQ29udHJvbHMoKTtcclxuICAgIFxyXG4gICAgLy8gU2V0dXAga2V5Ym9hcmQgem9vbSBjb250cm9sc1xyXG4gICAgdGhpcy5zZXR1cFpvb21LZXlzKCk7XHJcblxyXG4gICAgLy8gRW1pdCBnYW1lLXN0YXJ0ZWQgZXZlbnQgdG8gbm90aWZ5IFVJIChHYW1lQ2xpZW50KVxyXG4gICAgdGhpcy5nYW1lLmV2ZW50cy5lbWl0KCdnYW1lLXN0YXJ0ZWQnKTtcclxuXHJcbiAgICAvLyBDbGVhbiB1cCBvbiBzY2VuZSBzaHV0ZG93blxyXG4gICAgdGhpcy5ldmVudHMub24oJ3NodXRkb3duJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLm5ldHdvcmtNYW5hZ2VyLmRpc2Nvbm5lY3QoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlTmV0d29ya01lc3NhZ2UobWVzc2FnZTogTXVsdGlwbGF5ZXJNZXNzYWdlKSB7XHJcbiAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xyXG4gICAgICBjYXNlICdwbGF5ZXItam9pbic6XHJcbiAgICAgICAgdGhpcy5hZGRSZW1vdGVQbGF5ZXIobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncGxheWVyLWxlYXZlJzpcclxuICAgICAgICB0aGlzLnJlbW92ZVJlbW90ZVBsYXllcihtZXNzYWdlLmRhdGEuaWQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdwbGF5ZXItdXBkYXRlJzpcclxuICAgICAgICB0aGlzLnVwZGF0ZVJlbW90ZVBsYXllcihtZXNzYWdlLmRhdGEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdvYmplY3QtaW50ZXJhY3Rpb24nOlxyXG4gICAgICAgIC8vIEhhbmRsZSBzaGFyZWQgb2JqZWN0IGludGVyYWN0aW9uc1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBQbGF5ZXIgJHttZXNzYWdlLmRhdGEucGxheWVySWR9IGludGVyYWN0ZWQgd2l0aCAke21lc3NhZ2UuZGF0YS5vYmplY3RJZH1gKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnc2VsZi1wcm9maWxlLXVwZGF0ZSc6XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tHYW1lU2NlbmVdIFVwZGF0aW5nIGxvY2FsIHByb2ZpbGUgZnJvbSBzZXJ2ZXInKTtcclxuICAgICAgICBjb25zdCB3aW4gPSB3aW5kb3cgYXMgdW5rbm93biBhcyB7IHVwZGF0ZU15UHJvZmlsZUZyb21HYW1lPzogKHByb2ZpbGU6IGFueSkgPT4gdm9pZCB9O1xyXG4gICAgICAgIGlmICh3aW4udXBkYXRlTXlQcm9maWxlRnJvbUdhbWUpIHtcclxuICAgICAgICAgIHdpbi51cGRhdGVNeVByb2ZpbGVGcm9tR2FtZShtZXNzYWdlLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZFJlbW90ZVBsYXllcihkYXRhOiBQbGF5ZXJEYXRhKSB7XHJcbiAgICBpZiAoZGF0YS5pZCA9PT0gdGhpcy5uZXR3b3JrTWFuYWdlci5nZXRVc2VySWQoKSkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMucmVtb3RlUGxheWVycy5oYXMoZGF0YS5pZCkpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCByZW1vdGVQbGF5ZXIgPSBuZXcgUmVtb3RlUGxheWVyKHRoaXMsIGRhdGEpO1xyXG4gICAgdGhpcy5yZW1vdGVQbGF5ZXJzLnNldChkYXRhLmlkLCByZW1vdGVQbGF5ZXIpO1xyXG4gICAgXHJcbiAgICAvLyBBZGQgY29sbGlzaW9uIGJldHdlZW4gbG9jYWwgcGxheWVyIGFuZCByZW1vdGUgcGxheWVyXHJcbiAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHRoaXMucGxheWVyLnNwcml0ZSwgcmVtb3RlUGxheWVyLmdldFNwcml0ZSgpKTtcclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIHBsYXllciBjb3VudCBpbiBVSSAoMSA9IHNlbGYgKyByZW1vdGVQbGF5ZXJzIGNvdW50KVxyXG4gICAgdGhpcy51cGRhdGVQbGF5ZXJDb3VudFVJKCk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBbR2FtZVNjZW5lXSBQbGF5ZXIgam9pbmVkOiAke2RhdGEubmFtZX1gKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVJlbW90ZVBsYXllcihpZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCByZW1vdGVQbGF5ZXIgPSB0aGlzLnJlbW90ZVBsYXllcnMuZ2V0KGlkKTtcclxuICAgIGlmIChyZW1vdGVQbGF5ZXIpIHtcclxuICAgICAgcmVtb3RlUGxheWVyLmRlc3Ryb3koKTtcclxuICAgICAgdGhpcy5yZW1vdGVQbGF5ZXJzLmRlbGV0ZShpZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBVcGRhdGUgcGxheWVyIGNvdW50IGluIFVJXHJcbiAgICAgIHRoaXMudXBkYXRlUGxheWVyQ291bnRVSSgpO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtHYW1lU2NlbmVdIFBsYXllciBsZWZ0OiAke2lkfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlUmVtb3RlUGxheWVyKGRhdGE6IFBsYXllckRhdGEpIHtcclxuICAgIGlmIChkYXRhLmlkID09PSB0aGlzLm5ldHdvcmtNYW5hZ2VyLmdldFVzZXJJZCgpKSByZXR1cm47XHJcblxyXG4gICAgbGV0IHJlbW90ZVBsYXllciA9IHRoaXMucmVtb3RlUGxheWVycy5nZXQoZGF0YS5pZCk7XHJcbiAgICBpZiAoIXJlbW90ZVBsYXllcikge1xyXG4gICAgICAvLyBQbGF5ZXIgbm90IGZvdW5kLCBhZGQgdGhlbVxyXG4gICAgICByZW1vdGVQbGF5ZXIgPSBuZXcgUmVtb3RlUGxheWVyKHRoaXMsIGRhdGEpO1xyXG4gICAgICB0aGlzLnJlbW90ZVBsYXllcnMuc2V0KGRhdGEuaWQsIHJlbW90ZVBsYXllcik7XHJcbiAgICAgIC8vIEFkZCBjb2xsaXNpb24gYmV0d2VlbiBsb2NhbCBwbGF5ZXIgYW5kIHJlbW90ZSBwbGF5ZXJcclxuICAgICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcih0aGlzLnBsYXllci5zcHJpdGUsIHJlbW90ZVBsYXllci5nZXRTcHJpdGUoKSk7XHJcbiAgICAgIC8vIFVwZGF0ZSBwbGF5ZXIgY291bnRcclxuICAgICAgdGhpcy51cGRhdGVQbGF5ZXJDb3VudFVJKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZW1vdGVQbGF5ZXIudXBkYXRlRnJvbU5ldHdvcmsoZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQbGF5ZXJDb3VudFVJKCkge1xyXG4gICAgLy8gQ291bnQgPSAxIChzZWxmKSArIG51bWJlciBvZiByZW1vdGUgcGxheWVyc1xyXG4gICAgY29uc3QgdG90YWxQbGF5ZXJzID0gMSArIHRoaXMucmVtb3RlUGxheWVycy5zaXplO1xyXG4gICAgXHJcbiAgICAvLyBDYWxsIHRoZSBnbG9iYWwgdXBkYXRlUGxheWVyQ291bnQgZnVuY3Rpb24gaWYgaXQgZXhpc3RzXHJcbiAgICBjb25zdCB3aW4gPSB3aW5kb3cgYXMgdW5rbm93biBhcyB7IHVwZGF0ZVBsYXllckNvdW50PzogKGNvdW50OiBudW1iZXIpID0+IHZvaWQgfTtcclxuICAgIGlmICh3aW4udXBkYXRlUGxheWVyQ291bnQpIHtcclxuICAgICAgd2luLnVwZGF0ZVBsYXllckNvdW50KHRvdGFsUGxheWVycyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVNaW5pbWFwKCkge1xyXG4gICAgLy8gTWluaW1hcCBkaW1lbnNpb25zIC0gc21hbGxlciBvbiBtb2JpbGVcclxuICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPCA3Njg7XHJcbiAgICBjb25zdCBtaW5pbWFwV2lkdGggPSBpc01vYmlsZSA/IDEwMCA6IDE4MDtcclxuICAgIGNvbnN0IG1pbmltYXBIZWlnaHQgPSBpc01vYmlsZSA/IDc1IDogMTM1O1xyXG4gICAgY29uc3QgcGFkZGluZyA9IDE2O1xyXG4gICAgXHJcbiAgICAvLyBHZXQgYWN0dWFsIHZpZXdwb3J0IHdpZHRoXHJcbiAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBtaW5pbWFwIGNhbWVyYVxyXG4gICAgdGhpcy5taW5pbWFwQ2FtZXJhID0gdGhpcy5jYW1lcmFzLmFkZChcclxuICAgICAgdmlld3BvcnRXaWR0aCAtIG1pbmltYXBXaWR0aCAtIHBhZGRpbmcsXHJcbiAgICAgIHBhZGRpbmcsXHJcbiAgICAgIG1pbmltYXBXaWR0aCxcclxuICAgICAgbWluaW1hcEhlaWdodFxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gQ29uZmlndXJlIG1pbmltYXBcclxuICAgIHRoaXMubWluaW1hcENhbWVyYS5zZXRCb3VuZHMoMCwgMCwgdGhpcy53b3JsZFdpZHRoLCB0aGlzLndvcmxkSGVpZ2h0KTtcclxuICAgIHRoaXMubWluaW1hcENhbWVyYS5zZXRab29tKG1pbmltYXBXaWR0aCAvIHRoaXMud29ybGRXaWR0aCk7XHJcbiAgICB0aGlzLm1pbmltYXBDYW1lcmEuc2V0QmFja2dyb3VuZENvbG9yKDB4MWExYTJlKTtcclxuICAgIHRoaXMubWluaW1hcENhbWVyYS5zdGFydEZvbGxvdyh0aGlzLnBsYXllci5zcHJpdGUpO1xyXG4gICAgdGhpcy5taW5pbWFwQ2FtZXJhLnNldE5hbWUoJ21pbmltYXAnKTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIG1pbmltYXAgYm9yZGVyIHVzaW5nIEhUTUxcclxuICAgIGNvbnN0IGdhbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jb250YWluZXInKTtcclxuICAgIGlmICghZ2FtZUNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG1pbmltYXBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1pbmltYXBDb250YWluZXIuaWQgPSAnbWluaW1hcC1ib3JkZXInO1xyXG4gICAgbWluaW1hcENvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxyXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgIHRvcDogJHtwYWRkaW5nIC0gMn1weDtcclxuICAgICAgcmlnaHQ6ICR7cGFkZGluZyAtIDJ9cHg7XHJcbiAgICAgIHdpZHRoOiAke21pbmltYXBXaWR0aCArIDR9cHg7XHJcbiAgICAgIGhlaWdodDogJHttaW5pbWFwSGVpZ2h0ICsgNH1weDtcclxuICAgICAgYm9yZGVyOiAzcHggc29saWQgIzVhNWEzYTtcclxuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgei1pbmRleDogOTk5O1xyXG4gICAgYDtcclxuICAgIGdhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQobWluaW1hcENvbnRhaW5lcik7XHJcbiAgICBcclxuICAgIC8vIFN0b3JlIGZvciByZXNpemUgaGFuZGxpbmdcclxuICAgIHRoaXMubWluaW1hcFdpZHRoID0gbWluaW1hcFdpZHRoO1xyXG4gICAgdGhpcy5taW5pbWFwSGVpZ2h0ID0gbWluaW1hcEhlaWdodDtcclxuICAgIHRoaXMubWluaW1hcFBhZGRpbmcgPSBwYWRkaW5nO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlWm9vbUNvbnRyb2xzKCkge1xyXG4gICAgY29uc3QgZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lLWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKCFnYW1lQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuaWQgPSAnem9vbS1jb250cm9scyc7XHJcbiAgICBjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IGBcclxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICB0b3A6IDYwcHg7XHJcbiAgICAgIGxlZnQ6IDE2cHg7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgIGdhcDogOHB4O1xyXG4gICAgICB6LWluZGV4OiAxMDAwO1xyXG4gICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgICBgO1xyXG4gICAgXHJcbiAgICAvLyBab29tIGluIGJ1dHRvblxyXG4gICAgY29uc3Qgem9vbUluQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICB6b29tSW5CdG4udGV4dENvbnRlbnQgPSAnKyc7XHJcbiAgICB6b29tSW5CdG4uc3R5bGUuY3NzVGV4dCA9IGBcclxuICAgICAgd2lkdGg6IDQ0cHg7XHJcbiAgICAgIGhlaWdodDogNDRweDtcclxuICAgICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpO1xyXG4gICAgICBib3JkZXI6IDJweCBzb2xpZCAjNWE1YTNhO1xyXG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICAgIGNvbG9yOiAjNWE1YTNhO1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xyXG4gICAgYDtcclxuICAgIHpvb21JbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuem9vbUluKCkpO1xyXG4gICAgem9vbUluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB6b29tSW5CdG4uc3R5bGUuYmFja2dyb3VuZCA9ICcjZThlOGUwJyk7XHJcbiAgICB6b29tSW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHpvb21JbkJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC45KScpO1xyXG4gICAgXHJcbiAgICAvLyBab29tIG91dCBidXR0b25cclxuICAgIGNvbnN0IHpvb21PdXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIHpvb21PdXRCdG4udGV4dENvbnRlbnQgPSAn4oiSJztcclxuICAgIHpvb21PdXRCdG4uc3R5bGUuY3NzVGV4dCA9IGBcclxuICAgICAgd2lkdGg6IDQ0cHg7XHJcbiAgICAgIGhlaWdodDogNDRweDtcclxuICAgICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpO1xyXG4gICAgICBib3JkZXI6IDJweCBzb2xpZCAjNWE1YTNhO1xyXG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICAgIGNvbG9yOiAjNWE1YTNhO1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xyXG4gICAgYDtcclxuICAgIHpvb21PdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnpvb21PdXQoKSk7XHJcbiAgICB6b29tT3V0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB6b29tT3V0QnRuLnN0eWxlLmJhY2tncm91bmQgPSAnI2U4ZThlMCcpO1xyXG4gICAgem9vbU91dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4gem9vbU91dEJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC45KScpO1xyXG4gICAgXHJcbiAgICAvLyBab29tIHBlcmNlbnRhZ2UgZGlzcGxheVxyXG4gICAgdGhpcy56b29tRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy56b29tRGlzcGxheS5zdHlsZS5jc3NUZXh0ID0gYFxyXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgY29sb3I6ICM1YTVhM2E7XHJcbiAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcclxuICAgICAgcGFkZGluZzogNHB4IDhweDtcclxuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgYDtcclxuICAgIHRoaXMuem9vbURpc3BsYXkudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKHRoaXMuY3VycmVudFpvb20gKiAxMDApfSVgO1xyXG4gICAgXHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoem9vbUluQnRuKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh6b29tT3V0QnRuKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnpvb21EaXNwbGF5KTtcclxuICAgIFxyXG4gICAgZ2FtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBab29tS2V5cygpIHtcclxuICAgIC8vIFEgdG8gem9vbSBvdXQsIEUgdG8gem9vbSBpblxyXG4gICAgdGhpcy5pbnB1dC5rZXlib2FyZCEub24oJ2tleWRvd24tUScsICgpID0+IHRoaXMuem9vbU91dCgpKTtcclxuICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQhLm9uKCdrZXlkb3duLUUnLCAoKSA9PiB0aGlzLnpvb21JbigpKTtcclxuICAgIFxyXG4gICAgLy8gTW91c2Ugd2hlZWwgem9vbVxyXG4gICAgdGhpcy5pbnB1dC5vbignd2hlZWwnLCAoX3BvaW50ZXI6IFBoYXNlci5JbnB1dC5Qb2ludGVyLCBfZ2FtZU9iamVjdHM6IHVua25vd25bXSwgX2RlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcikgPT4ge1xyXG4gICAgICBpZiAoZGVsdGFZID4gMCkge1xyXG4gICAgICAgIHRoaXMuem9vbU91dCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRlbHRhWSA8IDApIHtcclxuICAgICAgICB0aGlzLnpvb21JbigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHpvb21JbigpIHtcclxuICAgIHRoaXMuY3VycmVudFpvb20gPSBNYXRoLm1pbih0aGlzLmN1cnJlbnRab29tICsgMC4yNSwgdGhpcy5tYXhab29tKTtcclxuICAgIHRoaXMuY2FtZXJhcy5tYWluLnNldFpvb20odGhpcy5jdXJyZW50Wm9vbSk7XHJcbiAgICB0aGlzLnVwZGF0ZVpvb21UZXh0KCk7XHJcbiAgfVxyXG5cclxuICB6b29tT3V0KCkge1xyXG4gICAgdGhpcy5jdXJyZW50Wm9vbSA9IE1hdGgubWF4KHRoaXMuY3VycmVudFpvb20gLSAwLjI1LCB0aGlzLm1pblpvb20pO1xyXG4gICAgdGhpcy5jYW1lcmFzLm1haW4uc2V0Wm9vbSh0aGlzLmN1cnJlbnRab29tKTtcclxuICAgIHRoaXMudXBkYXRlWm9vbVRleHQoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVpvb21UZXh0KCkge1xyXG4gICAgaWYgKHRoaXMuem9vbURpc3BsYXkpIHtcclxuICAgICAgdGhpcy56b29tRGlzcGxheS50ZXh0Q29udGVudCA9IGAke01hdGgucm91bmQodGhpcy5jdXJyZW50Wm9vbSAqIDEwMCl9JWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVUaWxlTWFwKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCB0aWxlU2l6ZSA9IDMyO1xyXG4gICAgY29uc3QgY29scyA9IE1hdGguY2VpbCh3aWR0aCAvIHRpbGVTaXplKTtcclxuICAgIGNvbnN0IHJvd3MgPSBNYXRoLmNlaWwoaGVpZ2h0IC8gdGlsZVNpemUpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgYSBncmFwaGljcyBvYmplY3QgZm9yIHRoZSBncm91bmRcclxuICAgIGNvbnN0IGdyb3VuZExheWVyID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIFxyXG4gICAgLy8gRHJhdyBiYXNlIGdyb3VuZCAtIHNvZnQgbWludC9za3kgYmx1ZSB0aGVtZVxyXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCByb3dzOyB5KyspIHtcclxuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb2xzOyB4KyspIHtcclxuICAgICAgICBjb25zdCBweCA9IHggKiB0aWxlU2l6ZTtcclxuICAgICAgICBjb25zdCBweSA9IHkgKiB0aWxlU2l6ZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBWYXJ5IGdyb3VuZCBjb2xvciBzbGlnaHRseVxyXG4gICAgICAgIGNvbnN0IG5vaXNlID0gTWF0aC5zaW4oeCAqIDAuMykgKiBNYXRoLmNvcyh5ICogMC4zKTtcclxuICAgICAgICBpZiAobm9pc2UgPiAwLjUpIHtcclxuICAgICAgICAgIGdyb3VuZExheWVyLmZpbGxTdHlsZSgweDk4ZDRiYik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChub2lzZSA8IC0wLjMpIHtcclxuICAgICAgICAgIGdyb3VuZExheWVyLmZpbGxTdHlsZSgweGM1ZThkNSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGdyb3VuZExheWVyLmZpbGxTdHlsZSgweGIwZGZjNik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdyb3VuZExheWVyLmZpbGxSZWN0KHB4LCBweSwgdGlsZVNpemUsIHRpbGVTaXplKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgc29tZSBncm91bmQgZGV0YWlsXHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjg1KSB7XHJcbiAgICAgICAgICBncm91bmRMYXllci5maWxsU3R5bGUoMHhmZmZmZmYpO1xyXG4gICAgICAgICAgZ3JvdW5kTGF5ZXIuZmlsbFJlY3QocHggKyBNYXRoLnJhbmRvbSgpICogMjQgKyA0LCBweSArIE1hdGgucmFuZG9tKCkgKiAyNCArIDQsIDMsIDMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgcGF0aHNcclxuICAgIHRoaXMuY3JlYXRlUGF0aHMoZ3JvdW5kTGF5ZXIsIHRpbGVTaXplLCB3aWR0aCwgaGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVBhdGhzKGdyYXBoaWNzOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3MsIHRpbGVTaXplOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICAvLyBNYWluIGhvcml6b250YWwgcGF0aFxyXG4gICAgY29uc3QgcGF0aFkgPSBNYXRoLmZsb29yKGhlaWdodCAvIDIgLyB0aWxlU2l6ZSkgKiB0aWxlU2l6ZTtcclxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHggKz0gdGlsZVNpemUpIHtcclxuICAgICAgZ3JhcGhpY3MuZmlsbFN0eWxlKDB4ZjBlNmZmKTtcclxuICAgICAgZ3JhcGhpY3MuZmlsbFJlY3QoeCwgcGF0aFkgLSB0aWxlU2l6ZSwgdGlsZVNpemUsIHRpbGVTaXplICogMyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBQYXRoIHRleHR1cmVcclxuICAgICAgZ3JhcGhpY3MuZmlsbFN0eWxlKDB4ZTBkNGYwKTtcclxuICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjcpIHtcclxuICAgICAgICBncmFwaGljcy5maWxsUmVjdCh4ICsgOCwgcGF0aFkgLSB0aWxlU2l6ZSArIDgsIDYsIDYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFZlcnRpY2FsIHBhdGhcclxuICAgIGNvbnN0IHBhdGhYID0gTWF0aC5mbG9vcih3aWR0aCAvIDIgLyB0aWxlU2l6ZSkgKiB0aWxlU2l6ZTtcclxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5ICs9IHRpbGVTaXplKSB7XHJcbiAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweGYwZTZmZik7XHJcbiAgICAgIGdyYXBoaWNzLmZpbGxSZWN0KHBhdGhYIC0gdGlsZVNpemUsIHksIHRpbGVTaXplICogMywgdGlsZVNpemUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlRGVjb3JhdGlvbnMoKSB7XHJcbiAgICAvLyBDcmVhdGUgb2JzdGFjbGVzIGdyb3VwIGZvciBjb2xsaXNpb25cclxuICAgIHRoaXMub2JzdGFjbGVzID0gdGhpcy5waHlzaWNzLmFkZC5zdGF0aWNHcm91cCgpO1xyXG4gICAgXHJcbiAgICAvLyBUcmVlcyBncm91cCBmb3IgZGVwdGggc29ydGluZ1xyXG4gICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYWRkLmdyb3VwKCk7XHJcbiAgICBcclxuICAgIC8vIFBhdGggYm91bmRzIGZvciBhdm9pZGluZyBmbG93ZXIgcGxhY2VtZW50XHJcbiAgICBjb25zdCBwYXRoWSA9IHRoaXMud29ybGRIZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgcGF0aFggPSB0aGlzLndvcmxkV2lkdGggLyAyO1xyXG4gICAgY29uc3QgcGF0aFdpZHRoID0gOTY7XHJcbiAgICBcclxuICAgIC8vIEhlbHBlciB0byBjaGVjayBpZiBwb3NpdGlvbiBpcyBvbiBhIHBhdGhcclxuICAgIGNvbnN0IGlzT25QYXRoID0gKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9uSG9yaXpvbnRhbFBhdGggPSBNYXRoLmFicyh5IC0gcGF0aFkpIDwgcGF0aFdpZHRoO1xyXG4gICAgICBjb25zdCBvblZlcnRpY2FsUGF0aCA9IE1hdGguYWJzKHggLSBwYXRoWCkgPCBwYXRoV2lkdGg7XHJcbiAgICAgIHJldHVybiBvbkhvcml6b250YWxQYXRoIHx8IG9uVmVydGljYWxQYXRoO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gUGxhY2UgdHJlZXMgYXJvdW5kIHRoZSBtYXBcclxuICAgIGNvbnN0IHRyZWVQb3NpdGlvbnMgPSBbXHJcbiAgICAgIHsgeDogMjAwLCB5OiAxNTAgfSwgeyB4OiAzNTAsIHk6IDIwMCB9LCB7IHg6IDE1MCwgeTogMzUwIH0sXHJcbiAgICAgIHsgeDogNDUwLCB5OiAxODAgfSwgeyB4OiAyODAsIHk6IDQ1MCB9LCB7IHg6IDUyMCwgeTogMzUwIH0sXHJcbiAgICAgIHsgeDogMTgwLCB5OiA3MDAgfSwgeyB4OiA0MDAsIHk6IDc1MCB9LCB7IHg6IDYwMCwgeTogNjgwIH0sXHJcbiAgICAgIHsgeDogMTAwMCwgeTogMjAwIH0sIHsgeDogMTE1MCwgeTogMzUwIH0sIHsgeDogMTMwMCwgeTogMTgwIH0sXHJcbiAgICAgIHsgeDogMTEwMCwgeTogNTAwIH0sIHsgeDogMTM1MCwgeTogNjUwIH0sIHsgeDogMTIwMCwgeTogODAwIH0sXHJcbiAgICAgIHsgeDogMjUwLCB5OiA5NTAgfSwgeyB4OiA0NTAsIHk6IDEwNTAgfSwgeyB4OiA3MDAsIHk6IDkwMCB9LFxyXG4gICAgICB7IHg6IDk1MCwgeTogMTAwMCB9LCB7IHg6IDExNTAsIHk6IDk1MCB9LCB7IHg6IDE0MDAsIHk6IDEwNTAgfSxcclxuICAgIF07XHJcbiAgICBcclxuICAgIHRyZWVQb3NpdGlvbnMuZm9yRWFjaChwb3MgPT4ge1xyXG4gICAgICBjb25zdCB0cmVlID0gdGhpcy5hZGQuaW1hZ2UocG9zLngsIHBvcy55LCAndHJlZScpO1xyXG4gICAgICB0cmVlLnNldE9yaWdpbigwLjUsIDEpO1xyXG4gICAgICB0cmVlLnNldERlcHRoKHBvcy55KTtcclxuICAgICAgdGhpcy5kZWNvcmF0aW9ucy5hZGQodHJlZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBBZGQgY29sbGlzaW9uIGJvZHkgZm9yIHRyZWUgdHJ1bmtcclxuICAgICAgY29uc3QgdHJlZUNvbGxpZGVyID0gdGhpcy5hZGQucmVjdGFuZ2xlKHBvcy54LCBwb3MueSAtIDE1LCAyNCwgMzApO1xyXG4gICAgICB0aGlzLnBoeXNpY3MuYWRkLmV4aXN0aW5nKHRyZWVDb2xsaWRlciwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMub2JzdGFjbGVzLmFkZCh0cmVlQ29sbGlkZXIpO1xyXG4gICAgICBcclxuICAgICAgLy8gQWRkIHN1YnRsZSBhbmltYXRpb25cclxuICAgICAgdGhpcy50d2VlbnMuYWRkKHtcclxuICAgICAgICB0YXJnZXRzOiB0cmVlLFxyXG4gICAgICAgIHNjYWxlWDogMS4wMixcclxuICAgICAgICBzY2FsZVk6IDAuOTgsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwMCxcclxuICAgICAgICB5b3lvOiB0cnVlLFxyXG4gICAgICAgIHJlcGVhdDogLTEsXHJcbiAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gUGxhY2UgYnVpbGRpbmcgKGNvZmZlZSBzaG9wKVxyXG4gICAgY29uc3QgYnVpbGRpbmcgPSB0aGlzLmFkZC5pbWFnZSgxNDAwLCAzNTAsICdidWlsZGluZycpO1xyXG4gICAgYnVpbGRpbmcuc2V0T3JpZ2luKDAuNSwgMSk7XHJcbiAgICBidWlsZGluZy5zZXREZXB0aCgzNTApO1xyXG4gICAgYnVpbGRpbmcuc2V0U2NhbGUoMS41KTtcclxuICAgIHRoaXMuZGVjb3JhdGlvbnMuYWRkKGJ1aWxkaW5nKTtcclxuICAgIFxyXG4gICAgLy8gQWRkIGNvbGxpc2lvbiBmb3IgYnVpbGRpbmdcclxuICAgIGNvbnN0IGJ1aWxkaW5nQ29sbGlkZXIgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMTQwMCwgMzAwLCAxNTAsIDEwMCk7XHJcbiAgICB0aGlzLnBoeXNpY3MuYWRkLmV4aXN0aW5nKGJ1aWxkaW5nQ29sbGlkZXIsIHRydWUpO1xyXG4gICAgdGhpcy5vYnN0YWNsZXMuYWRkKGJ1aWxkaW5nQ29sbGlkZXIpO1xyXG4gICAgXHJcbiAgICAvLyBQbGFjZSBiZW5jaGVzXHJcbiAgICBjb25zdCBiZW5jaFBvc2l0aW9ucyA9IFtcclxuICAgICAgeyB4OiA3MDAsIHk6IDU1MCB9LCB7IHg6IDkwMCwgeTogNTUwIH0sXHJcbiAgICAgIHsgeDogNzAwLCB5OiA2ODAgfSwgeyB4OiA5MDAsIHk6IDY4MCB9LFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgYmVuY2hQb3NpdGlvbnMuZm9yRWFjaChwb3MgPT4ge1xyXG4gICAgICBjb25zdCBiZW5jaCA9IHRoaXMuYWRkLmltYWdlKHBvcy54LCBwb3MueSwgJ2JlbmNoJyk7XHJcbiAgICAgIGJlbmNoLnNldE9yaWdpbigwLjUsIDEpO1xyXG4gICAgICBiZW5jaC5zZXREZXB0aChwb3MueSk7XHJcbiAgICAgIHRoaXMuZGVjb3JhdGlvbnMuYWRkKGJlbmNoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEFkZCBjb2xsaXNpb24gZm9yIGJlbmNoXHJcbiAgICAgIGNvbnN0IGJlbmNoQ29sbGlkZXIgPSB0aGlzLmFkZC5yZWN0YW5nbGUocG9zLngsIHBvcy55IC0gMTAsIDQ0LCAyMCk7XHJcbiAgICAgIHRoaXMucGh5c2ljcy5hZGQuZXhpc3RpbmcoYmVuY2hDb2xsaWRlciwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMub2JzdGFjbGVzLmFkZChiZW5jaENvbGxpZGVyKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBQbGFjZSBidXNoZXNcclxuICAgIGNvbnN0IGJ1c2hQb3NpdGlvbnMgPSBbXHJcbiAgICAgIHsgeDogMTAwLCB5OiAyMDAgfSwgeyB4OiAxMzAsIHk6IDIyMCB9LFxyXG4gICAgICB7IHg6IDE0NTAsIHk6IDQ1MCB9LCB7IHg6IDE0ODAsIHk6IDQyMCB9LFxyXG4gICAgICB7IHg6IDMwMCwgeTogODAwIH0sIHsgeDogMzMwLCB5OiA4MjAgfSxcclxuICAgICAgeyB4OiAxMjAwLCB5OiAxMTAwIH0sIHsgeDogMTIzMCwgeTogMTA4MCB9LFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgYnVzaFBvc2l0aW9ucy5mb3JFYWNoKHBvcyA9PiB7XHJcbiAgICAgIGNvbnN0IGJ1c2ggPSB0aGlzLmFkZC5pbWFnZShwb3MueCwgcG9zLnksICdidXNoJyk7XHJcbiAgICAgIGJ1c2guc2V0T3JpZ2luKDAuNSwgMSk7XHJcbiAgICAgIGJ1c2guc2V0RGVwdGgocG9zLnkpO1xyXG4gICAgICB0aGlzLmRlY29yYXRpb25zLmFkZChidXNoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEFkZCBjb2xsaXNpb24gZm9yIGJ1c2hcclxuICAgICAgY29uc3QgYnVzaENvbGxpZGVyID0gdGhpcy5hZGQucmVjdGFuZ2xlKHBvcy54LCBwb3MueSAtIDEwLCAyOCwgMjApO1xyXG4gICAgICB0aGlzLnBoeXNpY3MuYWRkLmV4aXN0aW5nKGJ1c2hDb2xsaWRlciwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMub2JzdGFjbGVzLmFkZChidXNoQ29sbGlkZXIpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIFBsYWNlIGZsb3dlcnMgcmFuZG9tbHkgLSBhdm9pZCBwYXRocyFcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzA7IGkrKykge1xyXG4gICAgICBsZXQgeCwgeTtcclxuICAgICAgbGV0IGF0dGVtcHRzID0gMDtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIHggPSBNYXRoLnJhbmRvbSgpICogMTUwMCArIDUwO1xyXG4gICAgICAgIHkgPSBNYXRoLnJhbmRvbSgpICogMTEwMCArIDUwO1xyXG4gICAgICAgIGF0dGVtcHRzKys7XHJcbiAgICAgIH0gd2hpbGUgKGlzT25QYXRoKHgsIHkpICYmIGF0dGVtcHRzIDwgMjApO1xyXG4gICAgICBcclxuICAgICAgLy8gU2tpcCBpZiBzdGlsbCBvbiBwYXRoIGFmdGVyIGF0dGVtcHRzXHJcbiAgICAgIGlmIChpc09uUGF0aCh4LCB5KSkgY29udGludWU7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBmbG93ZXIgPSB0aGlzLmFkZC5pbWFnZSh4LCB5LCAnZmxvd2VyJyk7XHJcbiAgICAgIGZsb3dlci5zZXRPcmlnaW4oMC41LCAxKTtcclxuICAgICAgZmxvd2VyLnNldERlcHRoKHkpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2VudGxlIHN3YXkgYW5pbWF0aW9uXHJcbiAgICAgIHRoaXMudHdlZW5zLmFkZCh7XHJcbiAgICAgICAgdGFyZ2V0czogZmxvd2VyLFxyXG4gICAgICAgIGFuZ2xlOiB7IGZyb206IC01LCB0bzogNSB9LFxyXG4gICAgICAgIGR1cmF0aW9uOiAxNTAwICsgTWF0aC5yYW5kb20oKSAqIDUwMCxcclxuICAgICAgICB5b3lvOiB0cnVlLFxyXG4gICAgICAgIHJlcGVhdDogLTEsXHJcbiAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVBbWJpZW50UGFydGljbGVzKCkge1xyXG4gICAgLy8gQ3JlYXRlIHNpbXBsZSBsZWFmIHBhcnRpY2xlcyB1c2luZyBncmFwaGljc1xyXG4gICAgY29uc3QgbGVhZkdyYXBoaWNzID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIGxlYWZHcmFwaGljcy5maWxsU3R5bGUoMHhkYWE1MjAsIDAuNik7XHJcbiAgICBsZWFmR3JhcGhpY3MuZmlsbFJlY3QoMCwgMCwgNCwgNCk7XHJcbiAgICBsZWFmR3JhcGhpY3MuZ2VuZXJhdGVUZXh0dXJlKCdsZWFmJywgNCwgNCk7XHJcbiAgICBsZWFmR3JhcGhpY3MuZGVzdHJveSgpO1xyXG4gICAgXHJcbiAgICAvLyBFbWl0IGxlYXZlcyBhY3Jvc3MgdGhlIHZpc2libGUgYXJlYVxyXG4gICAgY29uc3QgcGFydGljbGVzID0gdGhpcy5hZGQucGFydGljbGVzKDAsIDAsICdsZWFmJywge1xyXG4gICAgICB4OiB7IG1pbjogMCwgbWF4OiAxNjAwIH0sXHJcbiAgICAgIHk6IC0xMCxcclxuICAgICAgbGlmZXNwYW46IDgwMDAsXHJcbiAgICAgIHNwZWVkWDogeyBtaW46IC0yMCwgbWF4OiAyMCB9LFxyXG4gICAgICBzcGVlZFk6IHsgbWluOiAyMCwgbWF4OiA0MCB9LFxyXG4gICAgICBhbmdsZTogeyBtaW46IDAsIG1heDogMzYwIH0sXHJcbiAgICAgIHJvdGF0ZTogeyBtaW46IDAsIG1heDogMzYwIH0sXHJcbiAgICAgIHNjYWxlOiB7IHN0YXJ0OiAxLCBlbmQ6IDAuNSB9LFxyXG4gICAgICBhbHBoYTogeyBzdGFydDogMC43LCBlbmQ6IDAgfSxcclxuICAgICAgZnJlcXVlbmN5OiA1MDAsXHJcbiAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgfSk7XHJcbiAgICBwYXJ0aWNsZXMuc2V0RGVwdGgoOTk5KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLnBsYXllcikge1xyXG4gICAgICAvLyBVcGRhdGUgcGxheWVyIGFuZCBnZXQgY3VycmVudCBzdGF0ZVxyXG4gICAgICBjb25zdCBwbGF5ZXJTdGF0ZSA9IHRoaXMucGxheWVyLnVwZGF0ZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIHNwcml0ZSBkZXB0aCBiYXNlZCBvbiBZIHBvc2l0aW9uXHJcbiAgICAgIHRoaXMucGxheWVyLnNwcml0ZS5zZXREZXB0aCh0aGlzLnBsYXllci5zcHJpdGUueSk7XHJcblxyXG4gICAgICAvLyBCcm9hZGNhc3QgcGxheWVyIHBvc2l0aW9uIHRvIG5ldHdvcmtcclxuICAgICAgdGhpcy5uZXR3b3JrTWFuYWdlci5icm9hZGNhc3RQbGF5ZXJVcGRhdGUocGxheWVyU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBhbGwgcmVtb3RlIHBsYXllcnNcclxuICAgIHRoaXMucmVtb3RlUGxheWVycy5mb3JFYWNoKChyZW1vdGVQbGF5ZXIpID0+IHtcclxuICAgICAgcmVtb3RlUGxheWVyLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQaGFzZXIiLCJQbGF5ZXIiLCJSZW1vdGVQbGF5ZXIiLCJOZXR3b3JrTWFuYWdlciIsIkdhbWVTY2VuZSIsIlNjZW5lIiwia2V5IiwicmVtb3RlUGxheWVycyIsIk1hcCIsIndvcmxkV2lkdGgiLCJ3b3JsZEhlaWdodCIsImN1cnJlbnRab29tIiwibWluWm9vbSIsIm1heFpvb20iLCJjcmVhdGUiLCJyb29tSWQiLCJyZWdpc3RyeSIsImdldCIsInVzZXJJZCIsIkRhdGUiLCJub3ciLCJ1c2VyTmFtZSIsInVzZXJJbWFnZSIsInVzZXJQcm9maWxlIiwibmV0d29ya01hbmFnZXIiLCJldmVudHMiLCJvbiIsIndpbiIsIndpbmRvdyIsImdldE15UHJvZmlsZSIsImN1cnJlbnRQcm9maWxlIiwidXBkYXRlR2FtZVByb2ZpbGUiLCJwcm9maWxlIiwidXBkYXRlUHJvZmlsZSIsInBsYXllciIsImNvbm5lY3QiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm9uTWVzc2FnZSIsIm1lc3NhZ2UiLCJoYW5kbGVOZXR3b3JrTWVzc2FnZSIsInBoeXNpY3MiLCJ3b3JsZCIsInNldEJvdW5kcyIsImNyZWF0ZVRpbGVNYXAiLCJjcmVhdGVEZWNvcmF0aW9ucyIsInNwYXduT2Zmc2V0WCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNwYXduT2Zmc2V0WSIsImFkZCIsImNvbGxpZGVyIiwic3ByaXRlIiwib2JzdGFjbGVzIiwiY2FtZXJhcyIsIm1haW4iLCJzdGFydEZvbGxvdyIsInNldFpvb20iLCJjcmVhdGVBbWJpZW50UGFydGljbGVzIiwiY3JlYXRlTWluaW1hcCIsImNyZWF0ZVpvb21Db250cm9scyIsInNldHVwWm9vbUtleXMiLCJnYW1lIiwiZW1pdCIsImRpc2Nvbm5lY3QiLCJ0eXBlIiwiYWRkUmVtb3RlUGxheWVyIiwiZGF0YSIsInJlbW92ZVJlbW90ZVBsYXllciIsImlkIiwidXBkYXRlUmVtb3RlUGxheWVyIiwibG9nIiwicGxheWVySWQiLCJvYmplY3RJZCIsInVwZGF0ZU15UHJvZmlsZUZyb21HYW1lIiwiZ2V0VXNlcklkIiwiaGFzIiwicmVtb3RlUGxheWVyIiwic2V0IiwiZ2V0U3ByaXRlIiwidXBkYXRlUGxheWVyQ291bnRVSSIsIm5hbWUiLCJkZXN0cm95IiwiZGVsZXRlIiwidXBkYXRlRnJvbU5ldHdvcmsiLCJ0b3RhbFBsYXllcnMiLCJzaXplIiwidXBkYXRlUGxheWVyQ291bnQiLCJpc01vYmlsZSIsImlubmVyV2lkdGgiLCJtaW5pbWFwV2lkdGgiLCJtaW5pbWFwSGVpZ2h0IiwicGFkZGluZyIsInZpZXdwb3J0V2lkdGgiLCJtaW5pbWFwQ2FtZXJhIiwic2V0QmFja2dyb3VuZENvbG9yIiwic2V0TmFtZSIsImdhbWVDb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibWluaW1hcENvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImNzc1RleHQiLCJhcHBlbmRDaGlsZCIsIm1pbmltYXBQYWRkaW5nIiwiY29udGFpbmVyIiwiem9vbUluQnRuIiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiem9vbUluIiwiYmFja2dyb3VuZCIsInpvb21PdXRCdG4iLCJ6b29tT3V0Iiwiem9vbURpc3BsYXkiLCJyb3VuZCIsImlucHV0Iiwia2V5Ym9hcmQiLCJfcG9pbnRlciIsIl9nYW1lT2JqZWN0cyIsIl9kZWx0YVgiLCJkZWx0YVkiLCJtaW4iLCJ1cGRhdGVab29tVGV4dCIsIm1heCIsIndpZHRoIiwiaGVpZ2h0IiwidGlsZVNpemUiLCJjb2xzIiwiY2VpbCIsInJvd3MiLCJncm91bmRMYXllciIsImdyYXBoaWNzIiwieSIsIngiLCJweCIsInB5Iiwibm9pc2UiLCJzaW4iLCJjb3MiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNyZWF0ZVBhdGhzIiwicGF0aFkiLCJwYXRoWCIsInN0YXRpY0dyb3VwIiwiZGVjb3JhdGlvbnMiLCJncm91cCIsInBhdGhXaWR0aCIsImlzT25QYXRoIiwib25Ib3Jpem9udGFsUGF0aCIsImFicyIsIm9uVmVydGljYWxQYXRoIiwidHJlZVBvc2l0aW9ucyIsImZvckVhY2giLCJwb3MiLCJ0cmVlIiwiaW1hZ2UiLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsInRyZWVDb2xsaWRlciIsInJlY3RhbmdsZSIsImV4aXN0aW5nIiwidHdlZW5zIiwidGFyZ2V0cyIsInNjYWxlWCIsInNjYWxlWSIsImR1cmF0aW9uIiwieW95byIsInJlcGVhdCIsImVhc2UiLCJidWlsZGluZyIsInNldFNjYWxlIiwiYnVpbGRpbmdDb2xsaWRlciIsImJlbmNoUG9zaXRpb25zIiwiYmVuY2giLCJiZW5jaENvbGxpZGVyIiwiYnVzaFBvc2l0aW9ucyIsImJ1c2giLCJidXNoQ29sbGlkZXIiLCJpIiwiYXR0ZW1wdHMiLCJmbG93ZXIiLCJhbmdsZSIsImZyb20iLCJ0byIsImxlYWZHcmFwaGljcyIsImdlbmVyYXRlVGV4dHVyZSIsInBhcnRpY2xlcyIsImxpZmVzcGFuIiwic3BlZWRYIiwic3BlZWRZIiwicm90YXRlIiwic2NhbGUiLCJzdGFydCIsImVuZCIsImFscGhhIiwiZnJlcXVlbmN5IiwicXVhbnRpdHkiLCJ1cGRhdGUiLCJwbGF5ZXJTdGF0ZSIsImJyb2FkY2FzdFBsYXllclVwZGF0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./game/scenes/GameScene.ts\n");

/***/ }),

/***/ "?08b1":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?5fe5":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?d274":
/*!********************************!*\
  !*** supports-color (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ })

};
;